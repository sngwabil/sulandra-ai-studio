<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SULANDRA | AI Creative Studio</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
        rel="stylesheet"
    />

<style>
/* ==========================================================================
   1. CORE VARIABLES & RESET
   ========================================================================== */
:root {
    /* Theme Colors */
    --bg-app: #050505;            /* Main App Background */
    --bg-panel: #09090b;         /* Secondary Panel Background */
    --bg-card: #101012;          /* Input/Card Background */
    --bg-card-hover: #18181b;    /* Hover State */
    --bg-input: #000000;         /* Deep Black Inputs */
    
    --border-subtle: #1f1f23;
    --border-active: #2f2f35;
    
    /* The Signature Neon Green */
    --accent-neon: #4dff00;
    --accent-dim: rgba(77, 255, 0, 0.12);
    --accent-hover: #5eff1a;
    
    /* Text Colors */
    --text-primary: #ffffff;
    --text-secondary: #a1a1aa;
    --text-muted: #52525b;
    --text-dark: #000000;

    /* Sizing */
    --nav-width: 72px;
    --history-width: 92px;
    --header-height: 64px;
    
    /* Spacing & Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-pill: 9999px;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
}

body {
    background-color: var(--bg-app);
    color: var(--text-primary);
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    height: 100vh;
    width: 100vw;
    display: flex;
    overflow: hidden;
    font-size: 13px;
    line-height: 1.5;
}

/* Custom Scrollbar Styling */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #27272a; border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #3f3f46; }

/* Utility Classes */
.hidden { display: none !important; }
.flex { display: flex; }
.flex-col { display: flex; flex-direction: column; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.gap-2 { gap: 8px; }
.gap-3 { gap: 12px; }
.gap-4 { gap: 16px; }
.w-full { width: 100%; }
.h-full { height: 100%; }
.relative { position: relative; }
.text-neon { color: var(--accent-neon); }
.font-bold { font-weight: 700; }
.cursor-pointer { cursor: pointer; }

/* Buttons & Inputs Reset */
button, input, textarea, select {
    font-family: inherit;
    font-size: 13px;
    color: inherit;
    border: none;
    outline: none;
    background: transparent;
}

/* Common UI Components */
.neon-btn {
    background: var(--accent-neon);
    color: var(--text-dark);
    font-weight: 700;
    height: 42px;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 0 10px rgba(77, 255, 0, 0.2);
}
.neon-btn:hover {
    background: var(--accent-hover);
    transform: translateY(-1px);
    box-shadow: 0 0 15px rgba(77, 255, 0, 0.4);
}
.neon-btn:active {
    transform: translateY(0);
}

.icon-btn {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    transition: 0.2s;
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
}
.icon-btn:hover {
    color: var(--text-primary);
    border-color: var(--text-secondary);
}

.pill-input {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-sm);
    padding: 0 12px;
    height: 38px;
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: 0.2s;
}
.pill-input:hover {
    border-color: var(--border-active);
    color: var(--text-primary);
}

.upload-zone {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}
.upload-zone:hover {
    background: var(--bg-card-hover);
    border-color: var(--border-active);
}
.upload-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 1px dashed var(--text-muted);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    margin-bottom: 10px;
}
.file-input-hidden {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
    z-index: 10;
}
.preview-thumb-img {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
}

/* Toggle Switch */
.switch {
    position: relative;
    display: inline-block;
    width: 36px;
    height: 20px;
}
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
    position: absolute; cursor: pointer;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: #333; transition: .4s;
    border-radius: 20px;
}
.slider:before {
    position: absolute; content: "";
    height: 16px; width: 16px; left: 2px; bottom: 2px;
    background-color: white; transition: .4s; border-radius: 50%;
}
input:checked + .slider { background-color: var(--accent-neon); }
input:checked + .slider:before { transform: translateX(16px); }

/* Accordion Headers */
.accordion-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    padding: 10px 0;
    cursor: pointer;
    border-top: 1px solid var(--border-subtle);
    margin-top: 10px;
}
.accordion-header:hover { color: #fff; }

/* Camera Controls Grid */
.camera-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-bottom: 12px;
}
.camera-btn {
    height: 36px;
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    cursor: pointer;
}
.camera-btn:hover { background: #222; color: #fff; }
.camera-btn.active { border-color: var(--accent-neon); color: var(--accent-neon); background: rgba(77,255,0,0.05); }

/* ==========================================================================
   2. SIDEBAR NAVIGATION
   ========================================================================== */
.sidebar {
    width: var(--nav-width);
    background: var(--bg-app);
    border-right: 1px solid var(--border-subtle);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 0;
    z-index: 50;
    flex-shrink: 0;
}

.brand-logo {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: conic-gradient(from 0deg, #111, var(--accent-neon), #111);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 30px;
    box-shadow: 0 0 20px rgba(77, 255, 0, 0.15);
}
.brand-logo-inner {
    width: 36px;
    height: 36px;
    background: #000;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 800;
    color: var(--accent-neon);
    font-size: 18px;
}

.nav-item {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    margin-bottom: 16px;
    position: relative;
    cursor: pointer;
    transition: all 0.2s;
}
.nav-item:hover {
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.05);
}
.nav-item.active {
    color: var(--accent-neon);
    background: var(--accent-dim);
}
.nav-item.active::before {
    content: '';
    position: absolute;
    left: -14px;
    top: 10px;
    bottom: 10px;
    width: 3px;
    background: var(--accent-neon);
    border-radius: 0 4px 4px 0;
}
.nav-item svg {
    width: 24px;
    height: 24px;
    stroke-width: 1.5;
}

.nav-footer {
    margin-top: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    width: 100%;
}
.credits-pill {
    font-size: 10px;
    font-weight: 700;
    color: var(--text-primary);
    display: flex;
    flex-direction: column;
    align-items: center;
}
.credits-dot {
    width: 6px;
    height: 6px;
    background: var(--accent-neon);
    border-radius: 50%;
    margin-bottom: 4px;
    box-shadow: 0 0 8px var(--accent-neon);
}
.sale-badge {
    background: var(--accent-neon);
    color: #000;
    font-size: 9px;
    font-weight: 800;
    padding: 4px 6px;
    border-radius: 6px;
    text-align: center;
    line-height: 1.1;
}

/* ==========================================================================
   3. APP HEADER
   ========================================================================== */
.top-header {
    height: var(--header-height);
    background: var(--bg-app);
    border-bottom: 1px solid var(--border-subtle);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 24px;
    flex-shrink: 0;
}

.header-left { display: flex; align-items: center; gap: 16px; }
.page-title { font-size: 16px; font-weight: 600; color: #fff; }

.model-selector {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-pill);
    padding: 5px 14px;
    font-size: 11px;
    font-weight: 600;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
}
.status-dot { width: 6px; height: 6px; background: #ef4444; border-radius: 50%; }

.view-controls {
    background: var(--bg-panel);
    border: 1px solid var(--border-subtle);
    padding: 4px;
    border-radius: 10px;
    display: flex;
    gap: 2px;
}
.view-btn {
    padding: 6px 16px;
    border-radius: 8px;
    color: var(--text-secondary);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: 0.2s;
}
.view-btn.active {
    background: var(--bg-card);
    color: var(--text-primary);
    box-shadow: 0 1px 3px rgba(0,0,0,0.5);
}
.view-check {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 12px;
    font-size: 12px;
    color: var(--text-secondary);
    cursor: pointer;
}

.assets-btn {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    color: var(--text-primary);
    padding: 8px 16px;
    border-radius: var(--radius-sm);
    font-size: 12px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
}

/* ==========================================================================
   4. WORKSPACE LAYOUT & PANELS
   ========================================================================== */
.main-area {
    flex: 1;
    display: grid;
    grid-template-columns: 380px 1fr;
    overflow: hidden;
}

.config-panel {
    background: var(--bg-app);
    border-right: 1px solid var(--border-subtle);
    display: flex;
    flex-direction: column;
    padding: 24px;
    overflow-y: auto; /* Independent scroll for config */
}

/* Tab Navigation inside Panels */
.panel-tabs {
    display: flex;
    gap: 24px;
    border-bottom: 1px solid var(--border-subtle);
    margin-bottom: 24px;
}
.panel-tab {
    padding-bottom: 12px;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    position: relative;
    transition: 0.2s;
}
.panel-tab:hover { color: var(--text-primary); }
.panel-tab.active { color: var(--text-primary); }
.panel-tab.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 2px;
    background: #fff;
}

/* Sub-actions (Swap/Add/Delete) */
.sub-actions {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
}
.sub-btn {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    color: var(--text-secondary);
    padding: 6px 14px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    transition: 0.2s;
}
.sub-btn:hover { color: var(--text-primary); border-color: var(--text-muted); }
.sub-btn.active {
    background: #27272a;
    color: #fff;
    border-color: #3f3f46;
}

/* Prompt Areas */
.prompt-box {
    background: var(--bg-input);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    padding: 0;
    margin-bottom: 16px;
    display: flex;
    flex-direction: column;
    min-height: 140px;
}
.prompt-box textarea {
    flex: 1;
    padding: 16px;
    resize: none;
    color: var(--text-secondary);
}
.prompt-footer {
    padding: 8px 16px;
    border-top: 1px solid var(--border-subtle);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 11px;
    color: var(--text-muted);
}
.ask-sia-btn { 
    display: flex; 
    align-items: center; 
    gap: 6px; 
    color: #fff; 
    font-weight: 600; 
    cursor: pointer; 
    padding: 4px 10px;
    border-radius: 6px;
    background: linear-gradient(90deg, rgba(77, 255, 0, 0.1), rgba(77, 255, 0, 0.05));
    border: 1px solid rgba(77, 255, 0, 0.2);
    transition: 0.2s;
}
.ask-sia-btn:hover { 
    background: var(--accent-neon);
    color: #000;
    box-shadow: 0 0 10px rgba(77, 255, 0, 0.3);
}

/* Promo Banners */
.promo-banner {
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-sm);
    padding: 12px;
    font-size: 12px;
    color: var(--text-secondary);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
    line-height: 1.4;
}
.promo-link { color: var(--accent-neon); text-decoration: none; font-weight: 500; margin-left: 4px; }
.close-promo { cursor: pointer; color: var(--text-muted); font-size: 16px; }

/* Native Audio Block */
.native-audio-block {
    background: #0f1611;
    border: 1px solid #1a331a;
    border-radius: var(--radius-sm);
    padding: 10px 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
    margin-bottom: 20px;
}
.native-label { font-size: 13px; color: #fff; font-weight: 500; display: flex; align-items: center; gap: 8px; }
.native-badge { background: #dcb065; color: #000; font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: 700; }

/* Footer Controls Fixed at Bottom of Panel */
.panel-footer-controls {
    margin-top: auto;
    padding-top: 20px;
    border-top: 1px solid var(--border-subtle);
    display: flex;
    gap: 10px;
}

/* Grid Layouts (Effects/Avatars) */
.grid-2-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 20px;
}
.effect-card {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    overflow: hidden;
    cursor: pointer;
    position: relative;
    transition: 0.2s;
}
.effect-card:hover { border-color: var(--text-secondary); }
.effect-img {
    width: 100%;
    height: 140px;
    object-fit: cover;
    background: #1a1a1d;
}
.effect-info { padding: 10px; }
.effect-title { font-size: 13px; font-weight: 600; color: #fff; }
.effect-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    background: #ff4500;
    color: #fff;
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: 700;
}

/* ==========================================================================
   5. RIGHT PREVIEW STAGE (The "Independent Scroll" Area)
   ========================================================================== */
.stage-area {
    background: var(--bg-panel);
    display: flex;
    position: relative;
    flex: 1;
    overflow: hidden; /* Container doesn't scroll, content does */
}

.stage-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 30px;
    overflow-y: auto; /* THIS IS THE INDEPENDENT SCROLL */
    height: 100%;
}

/* Metadata Tags above Video */
.meta-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
    flex-shrink: 0;
}
.meta-tag {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 11px;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 6px;
}
.meta-tools { margin-left: auto; display: flex; gap: 8px; }

/* Video Player Container */
.player-container {
    width: 100%;
    aspect-ratio: 16/9;
    background: #000;
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-subtle);
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    flex-shrink: 0;
}

.player-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 16px 20px;
    background: linear-gradient(to top, rgba(0,0,0,0.95), transparent);
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.time-display { font-size: 12px; font-weight: 600; color: #fff; display: flex; align-items: center; gap: 8px; }

/* Action Bar Below Player */
.action-bar {
    margin-top: 20px;
    margin-bottom: 40px;
    display: flex;
    align-items: center;
    gap: 20px;
    font-size: 12px;
    color: var(--text-secondary);
    flex-shrink: 0;
}
.action-link {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    transition: 0.2s;
}
.action-link:hover { color: #fff; }
.divider-v { width: 1px; height: 14px; background: var(--border-subtle); }

/* CONTINUOUS SCROLL FEED */
.feed-header {
    font-size: 14px;
    font-weight: 600;
    color: #fff;
    margin-bottom: 16px;
    flex-shrink: 0;
}

.feed-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 16px;
    padding-bottom: 40px;
}

.feed-card {
    background: var(--bg-card);
    border-radius: var(--radius-md);
    overflow: hidden;
    border: 1px solid var(--border-subtle);
    cursor: pointer;
    transition: 0.2s;
}
.feed-card:hover { border-color: var(--text-secondary); }
.feed-thumb {
    width: 100%;
    aspect-ratio: 16/9;
    background: #111;
    position: relative;
}
.feed-thumb img { width: 100%; height: 100%; object-fit: cover; }
.feed-meta {
    padding: 10px;
    font-size: 11px;
    color: var(--text-secondary);
    display: flex;
    justify-content: space-between;
}

/* Right History Rail */
.history-rail {
    width: var(--history-width);
    background: var(--bg-app);
    border-left: 1px solid var(--border-subtle);
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 16px 12px;
    overflow-y: auto; /* Independent Scroll */
    flex-shrink: 0;
}
.history-thumb {
    width: 100%;
    aspect-ratio: 1/1;
    border-radius: 10px;
    background: #1a1a1d;
    overflow: hidden;
    border: 2px solid transparent;
    cursor: pointer;
    opacity: 0.7;
    transition: 0.2s;
    position: relative;
}
.history-thumb:hover { opacity: 1; border-color: var(--border-active); }
.history-thumb.active { opacity: 1; border-color: #fff; box-shadow: 0 0 10px rgba(255,255,255,0.1); }
.history-thumb img { width: 100%; height: 100%; object-fit: cover; }

/* Animations */
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
.animate-spin { animation: spin 1s linear infinite; }
</style>
</head>
<body>

    <aside class="sidebar">
        <div class="brand-logo">
            <div class="brand-logo-inner">S</div>
        </div>

        <div class="nav-item" title="Home">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        </div>
        
        <div class="nav-item" title="Image Gen" id="nav-image" onclick="switchMode('image', this)">
             <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
        </div>

        <div class="nav-item active" title="Video Gen" id="nav-video" onclick="switchMode('video', this)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg>
        </div>

        <div class="nav-item" title="Effects" id="nav-effects" onclick="switchMode('effects', this)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 2v20M2 12h20"></path><path d="m4.93 4.93 14.14 14.14M4.93 19.07 19.07 4.93"></path></svg>
        </div>

        <div class="nav-item" title="Audio" id="nav-audio" onclick="switchMode('audio', this)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
        </div>

        <div class="nav-item" title="Virtual Try On" id="nav-tryon" onclick="switchMode('tryon', this)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"></path></svg>
        </div>
        
        <div class="nav-item" title="Avatar" id="nav-avatar" onclick="switchMode('avatar', this)">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        </div>

        <div class="nav-footer">
            <div class="nav-item" style="margin-bottom:0;"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg></div>
            <div class="credits-pill">
                <div class="credits-dot"></div>
                671
            </div>
            <div class="sale-badge">SALE<br>50%</div>
            <div class="nav-item" style="border-radius:50%; background:#222; width:36px; height:36px; margin-top:8px;">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
            </div>
        </div>
    </aside>

    <div class="flex-col w-full h-full">
        
        <header class="top-header">
            <div class="header-left">
                <div class="page-title" id="page-title">AI Video Generator</div>
                <div class="model-selector">
                    <span id="model-text">VIDEO 1.6</span>
                    <div class="status-dot"></div>
                    <svg width="10" height="6" viewBox="0 0 10 6" fill="none" stroke="currentColor"><path d="M1 1L5 5L9 1"/></svg>
                </div>
            </div>

            <div class="view-controls">
                <div class="view-btn active">All</div>
                <div class="view-btn">Images</div>
                <div class="view-btn">Videos</div>
                <div class="view-btn">Audio</div>
                <div class="view-check">
                    <input type="checkbox" style="accent-color:var(--text-secondary);"> Favorites
                </div>
            </div>

            <div class="assets-btn">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
                Assets
            </div>
        </header>

        <div class="main-area">
            
            <section class="config-panel" id="panel-video">
                <div class="panel-tabs">
                    <div class="panel-tab active" onclick="switchVideoMode('text', this)">Text to Video</div>
                    <div class="panel-tab" onclick="switchVideoMode('image', this)">Image to Video</div>
                    <div class="panel-tab" onclick="switchVideoMode('extend', this)">Video Extender</div>
                </div>

                <div class="promo-banner">
                    <span>Go to SULANDRA O1 for the latest features. <a href="#" class="promo-link">Try Now</a></span>
                    <div class="close-promo">Ã—</div>
                </div>

                <div id="vid-mode-text">
                    <div class="sub-actions">
                         </div>
                    <div class="prompt-box">
                        <textarea id="video-prompt" placeholder="Describe the video you want to generate..."></textarea>
                        <div class="prompt-footer">
                             <span>Creative Description</span>
                             <div class="ask-sia-btn" onclick="askSia('video-prompt')">Ask SIA</div>
                        </div>
                    </div>
                    
                    <div class="accordion-header">Camera Control</div>
                    <div class="camera-grid">
                        <div class="camera-btn">Horizontal</div>
                        <div class="camera-btn">Vertical</div>
                        <div class="camera-btn">Zoom</div>
                        <div class="camera-btn">Tilt</div>
                        <div class="camera-btn">Pan</div>
                        <div class="camera-btn">Roll</div>
                    </div>

                    <div class="accordion-header">Negative Prompt</div>
                    <div class="prompt-box" style="min-height:80px; margin-bottom:10px;">
                        <textarea style="padding:10px;" placeholder="blurry, low quality..."></textarea>
                    </div>
                </div>

                <div id="vid-mode-image" class="hidden">
                    <div class="flex gap-2 mb-4">
                        <div class="upload-zone" style="height:140px; flex:1;">
                            <input type="file" class="file-input-hidden" onchange="handleFileUpload(this, 'img-start-prev')">
                            <img id="img-start-prev" class="preview-thumb-img hidden">
                            <div class="upload-icon"><svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></div>
                            <div style="font-size:12px; color:#fff;">Add a start frame</div>
                            <div style="font-size:10px; color:var(--text-secondary); text-decoration:underline; margin-top:4px;">History</div>
                        </div>
                        <div class="upload-zone" style="height:140px; flex:1; opacity:0.5; border-style:dashed;">
                            <div class="upload-icon"><svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg></div>
                            <div style="font-size:11px; text-align:center; padding:0 10px; color:var(--text-secondary);">End Frame is not available with Native Audio</div>
                        </div>
                    </div>
                    
                    <div class="prompt-box" style="min-height:100px;">
                        <textarea placeholder="Describe the motion..."></textarea>
                    </div>

                    <div class="native-audio-block">
                        <div class="native-label">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
                            Native Audio
                            <span class="native-badge">30% Off for Subscribers</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>

                <div id="vid-mode-extend" class="hidden">
                    <div class="upload-zone" style="height:200px; margin-bottom:20px;">
                         <img src="https://placehold.co/300x160/111/444?text=Source+Video" style="width:100%; height:100%; object-fit:cover; opacity:0.4;">
                         <div style="position:absolute; display:flex; flex-direction:column; align-items:center;">
                             <div class="upload-icon"><svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></div>
                             <div style="font-weight:600; color:#fff;">Add a video to extend</div>
                         </div>
                    </div>
                    
                    <div class="native-audio-block">
                        <div class="native-label">Sound Effects <span style="font-size:10px; color:#aaa; margin-left:4px;">(Free for now)</span></div>
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>


                <div class="panel-footer-controls">
                    <div class="pill-input" style="flex:1;">Professional <svg width="10" height="6" style="margin-left:auto" fill="none" stroke="currentColor" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1"/></svg></div>
                    <div class="pill-input" style="width:80px;">5s <svg width="10" height="6" style="margin-left:auto" fill="none" stroke="currentColor" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1"/></svg></div>
                    <div class="pill-input" style="width:100px;">1 Output <svg width="10" height="6" style="margin-left:auto" fill="none" stroke="currentColor" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1"/></svg></div>
                    <button class="neon-btn" style="flex:2;" onclick="handleGenerate('video')">Generate</button>
                </div>
            </section>

            <section class="config-panel hidden" id="panel-image">
                <div class="panel-tabs">
                    <div class="panel-tab">Text to Image</div>
                    <div class="panel-tab">Image Reference</div>
                    <div class="panel-tab active">Restyle</div>
                </div>

                <div class="upload-zone" style="height: 180px; margin-bottom:20px;">
                    <div class="upload-icon"><svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg></div>
                    <div style="font-weight:600; color:#fff; font-size:16px; margin-bottom:6px;">Add Image</div>
                    <div style="font-size:12px; text-decoration:underline; color:var(--text-secondary);">History</div>
                </div>

                <label style="color:var(--text-secondary); font-size:12px; margin-bottom:8px; display:block;">Restyle Prompt (Required)</label>
                <div class="prompt-box" style="height:120px;">
                    <textarea id="image-prompt" placeholder="Enter your prompt for restyle. For example: restyle to Japanese anime style"></textarea>
                    <div class="prompt-footer" style="justify-content:flex-end;">
                         <div class="ask-sia-btn" onclick="askSia('image-prompt')">Ask SIA</div>
                    </div>
                </div>

                <label style="color:var(--text-secondary); font-size:12px; margin-bottom:12px; display:block;">Try these to get started:</label>
                <div class="grid-2-col">
                    <div class="effect-card" style="height:60px; display:flex; align-items:center; justify-content:center; background:#222;">
                        <span style="font-size:12px; font-weight:600; color:#aaa;">Cyberpunk</span>
                    </div>
                    <div class="effect-card" style="height:60px; display:flex; align-items:center; justify-content:center; background:#222;">
                         <span style="font-size:12px; font-weight:600; color:#aaa;">Oil Painting</span>
                    </div>
                </div>

                <div class="panel-footer-controls">
                     <div class="pill-input" style="flex:1;">4 Outputs <svg width="10" height="6" style="margin-left:auto" fill="none" stroke="currentColor" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1"/></svg></div>
                     <button class="neon-btn" style="flex:2;" onclick="handleGenerate('image')">Generate</button>
                </div>
            </section>

            <section class="config-panel hidden" id="panel-effects">
                <div class="panel-tabs">
                    <div class="panel-tab active" style="font-size:16px; font-weight:700; color:#fff;">Effects</div>
                </div>

                <label style="color:var(--text-secondary); font-size:12px; margin-bottom:8px; display:block;">Select an effect</label>
                <div class="pill-input" style="justify-content:space-between; margin-bottom:20px;">
                    <div class="flex items-center gap-2">
                        <img src="https://placehold.co/20" style="border-radius:4px;">
                        <span style="color:#fff;">Xmas Match</span>
                        <span style="background:#ff4500; color:#fff; font-size:9px; padding:2px 6px; border-radius:4px; font-weight:700;">Hot</span>
                    </div>
                    <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M7 13l5 5 5-5M7 6l5 5 5-5"/></svg>
                </div>

                <div class="upload-zone" style="height: 180px; margin-bottom:24px;">
                     <div class="upload-icon"><svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></div>
                     <div style="font-weight:600; color:#fff;">Add an image</div>
                     <div style="font-size:12px; text-decoration:underline; margin-top:8px; color:var(--text-secondary);">History</div>
                </div>

                <div class="flex gap-4 mb-4" style="color:var(--text-secondary); font-size:12px;">
                    <div style="color:#fff; border-bottom:1px solid #fff; padding-bottom:2px;">All</div>
                    <div>Laugh Hype</div>
                    <div>Move Groove</div>
                    <div>Chic Look</div>
                </div>

                <div class="grid-2-col">
                    <div class="effect-card">
                        <div class="effect-badge">Hot</div>
                        <img class="effect-img" src="https://placehold.co/300x400/111/fff?text=Tree">
                        <div class="effect-info">
                            <div class="effect-title">Xmas Match</div>
                        </div>
                    </div>
                    <div class="effect-card">
                        <div class="effect-badge">Hot</div>
                        <img class="effect-img" src="https://placehold.co/300x400/333/fff?text=Scream">
                        <div class="effect-info">
                            <div class="effect-title">Mind Reader</div>
                        </div>
                    </div>
                </div>

                <div class="panel-footer-controls">
                    <button class="neon-btn" style="width:100%;" onclick="handleGenerate('effects')">Generate</button>
                </div>
            </section>

            <section class="config-panel hidden" id="panel-tryon">
                <div class="panel-tabs">
                    <div class="panel-tab active">Virtual Model</div>
                    <div class="panel-tab">AI Virtual Try-On</div>
                </div>

                <div style="margin-bottom:20px;">
                    <label style="font-size:12px; color:var(--text-secondary); margin-bottom:8px; display:block;">Gender:</label>
                    <div class="flex gap-3">
                        <div class="pill-input justify-center" style="flex:1;">Male</div>
                        <div class="pill-input justify-center" style="flex:1; border-color:#fff; color:#fff;">Female</div>
                    </div>
                </div>

                <div style="margin-bottom:20px;">
                    <label style="font-size:12px; color:var(--text-secondary); margin-bottom:8px; display:block;">Age:</label>
                    <div class="flex gap-3">
                        <div class="pill-input justify-center" style="flex:1;">Children</div>
                        <div class="pill-input justify-center" style="flex:1; border-color:#fff; color:#fff;">Youth</div>
                        <div class="pill-input justify-center" style="flex:1;">Elderly</div>
                    </div>
                </div>

                <div style="margin-bottom:24px;">
                    <label style="font-size:12px; color:var(--text-secondary); margin-bottom:8px; display:block;">Skin Tone:</label>
                    <div class="flex gap-4">
                        <div style="width:36px; height:36px; border-radius:8px; background:#f6d2a8; border:2px solid #fff; cursor:pointer;"></div>
                        <div style="width:36px; height:36px; border-radius:8px; background:#eac096; cursor:pointer;"></div>
                        <div style="width:36px; height:36px; border-radius:8px; background:#a97e56; cursor:pointer;"></div>
                        <div style="width:36px; height:36px; border-radius:8px; background:#5c3e2e; cursor:pointer;"></div>
                    </div>
                </div>

                <div class="prompt-box" style="flex:1;">
                    <textarea placeholder="Describe the model..."></textarea>
                    <div class="prompt-footer">
                        <div class="ask-sia-btn">Ask SIA</div>
                    </div>
                </div>

                <div class="panel-footer-controls">
                    <div class="pill-input" style="width:80px;">3:4 <svg width="10" height="6" style="margin-left:auto" fill="none" stroke="currentColor" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1"/></svg></div>
                    <div class="pill-input" style="flex:1;">4 Outputs <svg width="10" height="6" style="margin-left:auto" fill="none" stroke="currentColor" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1"/></svg></div>
                    <button class="neon-btn" style="flex:2;" onclick="handleGenerate('tryon')">Generate</button>
                </div>
            </section>

            <section class="config-panel hidden" id="panel-avatar">
                <div class="panel-tabs">
                    <div class="panel-tab active">Build Avatar 2.0</div>
                    <div class="panel-tab">Lip Sync</div>
                </div>

                <div class="flex gap-3 mb-6 items-center">
                    <img src="https://placehold.co/60" style="width:50px; height:60px; border-radius:6px; object-fit:cover;">
                    <div class="flex-col gap-2">
                        <div style="font-size:12px; color:#fff;">Build Your Avatar with Steps</div>
                        <div class="flex gap-2">
                            <div class="sub-btn">Avatar Library</div>
                            <div class="sub-btn">AI Image</div>
                        </div>
                    </div>
                </div>

                <div class="upload-zone" style="height: 180px; margin-bottom:20px;">
                    <div class="upload-icon"><svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg></div>
                    <div style="font-weight:600; color:#fff;">Upload Image</div>
                    <div style="font-size:12px; text-decoration:underline; margin-top:8px; color:var(--text-secondary);">History</div>
                </div>

                <div class="flex justify-between mb-2">
                    <label style="font-size:12px; color:var(--text-secondary);">Speech</label>
                    <div style="font-size:12px; color:var(--text-secondary); display:flex; align-items:center; gap:4px;"><svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> Upload Audio</div>
                </div>

                <div class="prompt-box" style="height:120px;">
                    <textarea placeholder="Please input the text you'd like the character to say."></textarea>
                    <div class="prompt-footer">
                         <span>Sample different voices to learn duration</span>
                    </div>
                </div>

                <div class="panel-footer-controls">
                    <div class="pill-input" style="flex:1;">Professional (1080) <svg width="10" height="6" style="margin-left:auto" fill="none" stroke="currentColor" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1"/></svg></div>
                    <div class="pill-input" style="width:100px;">1 Output <svg width="10" height="6" style="margin-left:auto" fill="none" stroke="currentColor" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1"/></svg></div>
                    <button class="neon-btn" style="flex:1; background:#2f2f35; color:#aaa; box-shadow:none;">Generate</button>
                </div>
            </section>

             <section class="config-panel hidden" id="panel-audio">
                <div class="panel-tabs">
                    <div class="panel-tab active">Text to Audio</div>
                    <div class="panel-tab">Video to Audio</div>
                </div>

                <div class="prompt-box" style="height:200px; margin-bottom:20px;">
                    <textarea placeholder="Please enter prompt for sound effects"></textarea>
                    <div class="prompt-footer">
                        <div class="ask-sia-btn">Ask SIA</div>
                    </div>
                </div>

                <label style="font-size:12px; color:var(--text-secondary); margin-bottom:12px; display:block;">Recommended Sound Effects:</label>
                <div class="grid-2-col" style="gap:10px;">
                    <div class="pill-input" style="background:#1a1a1d; border:none; justify-content:flex-start;">
                        <div style="width:20px; height:20px; border-radius:50%; background:linear-gradient(135deg, #0cf, #f0c); margin-right:8px;"></div>
                        <span style="font-size:11px;">Dog Chewing</span>
                    </div>
                    <div class="pill-input" style="background:#1a1a1d; border:none; justify-content:flex-start;">
                        <div style="width:20px; height:20px; border-radius:50%; background:linear-gradient(135deg, #0cf, #f0c); margin-right:8px;"></div>
                        <span style="font-size:11px;">Zippo Lighter</span>
                    </div>
                    <div class="pill-input" style="background:#1a1a1d; border:none; justify-content:flex-start;">
                        <div style="width:20px; height:20px; border-radius:50%; background:linear-gradient(135deg, #f00, #ff0); margin-right:8px;"></div>
                        <span style="font-size:11px;">Monster Eating</span>
                    </div>
                    <div class="pill-input" style="background:#1a1a1d; border:none; justify-content:flex-start;">
                        <div style="width:20px; height:20px; border-radius:50%; background:linear-gradient(135deg, #f00, #ff0); margin-right:8px;"></div>
                        <span style="font-size:11px;">Space Echo</span>
                    </div>
                </div>

                <div class="panel-footer-controls">
                    <div class="pill-input" style="width:80px;">10s <svg width="10" height="6" style="margin-left:auto" fill="none" stroke="currentColor" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1"/></svg></div>
                    <div class="pill-input" style="flex:1;">4 Outputs <svg width="10" height="6" style="margin-left:auto" fill="none" stroke="currentColor" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1"/></svg></div>
                    <button class="neon-btn" style="flex:2;">Generate</button>
                </div>
            </section>

            <div class="stage-area">
                <div class="stage-content">
                    
                    <div class="meta-row">
                        <div class="meta-tag">
                            <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line></svg>
                            Video
                        </div>
                        <div class="meta-tag">
                            <img src="https://placehold.co/12" style="border-radius:2px;"> Start
                        </div>
                        <div class="meta-tag">Video 2.5 Turbo</div>
                        <div class="meta-tag">Professional Mode</div>

                        <div class="meta-tools">
                            <div class="icon-btn" title="Edit"><svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></div>
                            <div class="icon-btn" title="Undo"><svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M1 4v6h6"></path><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg></div>
                        </div>
                    </div>

                    <div style="font-size:13px; color:var(--text-secondary); margin-bottom:12px;">
                        Make her dance an African Makossa highlife at 120 BPM...
                    </div>

                    <div class="player-container">
                        <div id="player-screen" style="width:100%; height:100%; display:flex; background:#000; align-items:center; justify-content:center; overflow:hidden;">
                            <img id="main-preview-img" src="https://placehold.co/800x450/111/444?text=Preview" style="width:100%; height:100%; object-fit:contain;">
                        </div>

                        <div class="player-overlay">
                            <div class="time-display">
                                <svg id="play-icon" width="16" height="16" fill="#fff" viewBox="0 0 24 24" class="cursor-pointer" onclick="togglePlay()"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                                <span id="time-label">00:00 / 00:05</span>
                            </div>
                            <div class="flex gap-3">
                                <svg width="16" height="16" fill="none" stroke="#fff" stroke-width="2" viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg>
                                <svg width="16" height="16" fill="none" stroke="#fff" stroke-width="2" viewBox="0 0 24 24"><path d="M15 3h6v6"></path><path d="M9 21H3v-6"></path><path d="M21 3l-7 7"></path><path d="M3 21l7-7"></path></svg>
                            </div>
                        </div>
                    </div>

                    <div class="action-bar">
                        <div class="action-link" style="color:var(--text-primary); font-weight:600;">
                            <div style="width:16px; height:16px; background:var(--accent-neon); border-radius:50%;"></div>
                            Go to SULANDRA O1 to create
                        </div>
                        <div class="divider-v"></div>
                        <div class="action-link"><svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline></svg> Multi-Elements</div>
                        <div class="divider-v"></div>
                        <div class="action-link"><svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg> Lip Sync</div>
                        <div class="divider-v"></div>
                        <div class="action-link"><svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg> AI Sound</div>
                    </div>

                    <div class="feed-header">
                        Recent Creations
                        <span style="font-size:11px; font-weight:400; color:var(--text-secondary);">Auto-saved</span>
                    </div>
                    <div class="feed-grid" id="feed-grid">
                        </div>
                </div>

                <aside class="history-rail" id="history-rail">
                    </aside>
            </div>

        </div>
    </div>

    <script>
        // =========================================================================
        // âš¡ API CONFIGURATION - PLUG YOUR ADDRESS HERE
        // =========================================================================
        const API_CONFIG = {
            // Replace with your actual backend URL (e.g. "https://api.sulandra.com")
            baseUrl: "http://localhost:3000", 
            
            endpoints: {
                generate: "/api/generate",
                upload: "/api/upload",
                history: "/api/history"
            }
        };

        // --- STATE MANAGEMENT ---
        const state = {
            credits: 671,
            mode: 'video',
            isPlaying: false,
            history: [
                { id: 1, type: 'video', url: 'https://placehold.co/400x225/222/555?text=Creation+1', time: '00:05' },
                { id: 2, type: 'video', url: 'https://placehold.co/400x225/222/555?text=Creation+2', time: '00:10' },
                { id: 3, type: 'image', url: 'https://placehold.co/400x225/333/666?text=Image+1', time: 'IMG' }
            ]
        };

        // --- NAVIGATION & UI LOGIC ---
        function switchMode(mode, element) {
            state.mode = mode;
            
            // 1. Sidebar highlight
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            if(element) element.classList.add('active');

            // 2. Panel Switch
            document.querySelectorAll('.config-panel').forEach(p => p.classList.add('hidden'));
            const target = document.getElementById(`panel-${mode}`);
            if(target) target.classList.remove('hidden');

            // 3. Update Title
            const titles = {
                video: 'AI Video Generator',
                image: 'AI Image Generator',
                effects: 'AI Effects',
                tryon: 'AI Virtual Try-On',
                avatar: 'Avatar 2.0',
                audio: 'AI Sound Generator'
            };
            document.getElementById('page-title').innerText = titles[mode] || 'Creative Studio';
        }

        function switchVideoMode(submode, element) {
            // Tab highlight
            const tabs = element.parentElement.querySelectorAll('.panel-tab');
            tabs.forEach(t => t.classList.remove('active'));
            element.classList.add('active');

            // Hide all sub-sections
            document.getElementById('vid-mode-text').classList.add('hidden');
            document.getElementById('vid-mode-image').classList.add('hidden');
            document.getElementById('vid-mode-extend').classList.add('hidden');

            // Show target
            document.getElementById(`vid-mode-${submode}`).classList.remove('hidden');
        }

        // --- ASK SIA LOGIC (Simulated LLM) ---
        function askSia(targetId) {
            const btn = event.currentTarget;
            const originalText = btn.innerHTML;
            const textarea = document.getElementById(targetId || 'video-prompt');
            
            btn.innerHTML = `<svg class="animate-spin" width="12" height="12" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"></path></svg> Thinking...`;
            
            // Simulation of AI thinking delay
            setTimeout(() => {
                const prompts = [
                    "Cinematic drone shot of a futuristic cyberpunk city with neon lights reflecting in rain puddles, 8k resolution, highly detailed.",
                    "Close up portrait of a warrior in golden armor, dramatic lighting, volumetric fog, unreal engine 5 render.",
                    "Time-lapse of a blooming lotus flower in a serene pond, soft bokeh background, macro lens."
                ];
                textarea.value = "";
                let txt = prompts[Math.floor(Math.random() * prompts.length)];
                let i = 0;
                
                // Typewriter effect
                const interval = setInterval(() => {
                    textarea.value += txt.charAt(i);
                    i++;
                    if (i > txt.length - 1) {
                        clearInterval(interval);
                        btn.innerHTML = originalText;
                    }
                }, 30);
            }, 1000);
        }

        // --- GENERATION LOGIC (API HOOK) ---
        async function handleGenerate(type) {
            const btn = event.currentTarget;
            const originalText = btn.innerHTML;
            
            // 1. Visual Loading State
            btn.innerHTML = `<svg class="animate-spin" width="14" height="14" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Processing`;
            btn.style.opacity = "0.7";
            btn.disabled = true;

            // 2. Prepare Payload (Example)
            const payload = {
                mode: type,
                prompt: document.querySelector('textarea').value,
                timestamp: Date.now()
            };

            try {
                // 3. ATTEMPT REAL API CALL
                // Note: This will fail if you don't have a backend running, so we catch errors.
                // const response = await fetch(API_CONFIG.baseUrl + API_CONFIG.endpoints.generate, {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify(payload)
                // });
                // const data = await response.json();
                
                // 4. SIMULATION (Fallback for demo purposes)
                await new Promise(r => setTimeout(r, 2000)); // Fake network delay
                
                // Add new mock asset
                const newAsset = {
                    id: Date.now(),
                    type: type || 'video',
                    url: `https://placehold.co/400x225/111/fff?text=New+${type}+${state.history.length + 1}`,
                    time: '00:05'
                };
                state.history.unshift(newAsset);
                
                // 5. Update UI
                renderFeed();
                renderHistory();
                
                // Load into player
                document.getElementById('main-preview-img').src = newAsset.url;

            } catch (error) {
                console.error("API Error (Is your backend running?):", error);
                alert("Could not connect to API. Simulation used.");
            } finally {
                btn.innerHTML = originalText;
                btn.style.opacity = "1";
                btn.disabled = false;
            }
        }

        // --- FILE UPLOAD PREVIEW ---
        function handleFileUpload(input, imgId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.getElementById(imgId);
                    if(img) {
                        img.src = e.target.result;
                        img.classList.remove('hidden');
                    }
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- FEED & HISTORY RENDERING ---
        function renderFeed() {
            const container = document.getElementById('feed-grid');
            container.innerHTML = state.history.map(item => `
                <div class="feed-card" onclick="loadPreview('${item.url}')">
                    <div class="feed-thumb"><img src="${item.url}"></div>
                    <div class="feed-meta"><span>${item.type.toUpperCase()}</span><span>${item.time}</span></div>
                </div>
            `).join('');
        }

        function renderHistory() {
            const container = document.getElementById('history-rail');
            container.innerHTML = state.history.map(item => `
                <div class="history-thumb" onclick="loadPreview('${item.url}')">
                    <img src="${item.url}">
                </div>
            `).join('');
        }

        function loadPreview(url) {
            document.getElementById('main-preview-img').src = url;
        }

        function togglePlay() {
            const icon = document.getElementById('play-icon');
            state.isPlaying = !state.isPlaying;
            icon.innerHTML = state.isPlaying 
                ? '<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>' 
                : '<polygon points="5 3 19 12 5 21 5 3"></polygon>';
        }

        // Initialize
        renderFeed();
        renderHistory();

        // Add CSS Animation
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
            .animate-spin { animation: spin 1s linear infinite; }
        `;
        document.head.appendChild(styleSheet);

    </script>
</body>
</html>
