<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sulandra AI Studio – Home</title>

  <style>
    :root {
      --bg: #050816;
      --card-bg: #0b1020;
      --accent: #a855f7;
      --accent-soft: rgba(168, 85, 247, 0.18);
      --accent2: #3b82f6;
      --accent3: #f97316;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --border-soft: rgba(148, 163, 184, 0.2);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background:
        radial-gradient(circle at top, #111827, #020617 55%),
        radial-gradient(circle at bottom, #020617, #000 80%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* HEADER */

    header {
      border-bottom: 1px solid var(--border-soft);
      background: rgba(2, 6, 23, 0.95);
      backdrop-filter: blur(12px);
      position: sticky;
      top: 0;
      z-index: 30;
    }

    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 14px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      flex-wrap: wrap;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-circle {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: conic-gradient(
        from 140deg,
        #a855f7,
        #3b82f6,
        #f97316,
        #22c55e,
        #a855f7
      );
      box-shadow: 0 0 18px rgba(168, 85, 247, 0.6);
      animation: spinGlow 8s linear infinite;
    }

    .logo-text-main {
      font-weight: 700;
      font-size: 17px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .logo-text-sub {
      font-size: 10px;
      text-transform: uppercase;
      color: var(--text-muted);
      letter-spacing: 0.14em;
      animation: glowPulse 3.5s ease-in-out infinite;
    }

    .nav-group {
      display: flex;
      align-items: center;
      gap: 14px;
      flex-wrap: wrap;
    }

    nav {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    nav a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 14px;
      padding: 6px 9px;
      border-radius: 999px;
      border: 1px solid transparent;
      transition: all 0.18s ease;
    }
/* DEFAULT – dark pill like your current Visual Lab (no glow) */
nav a.nav-glow {
  font-size: 16px;
  font-weight: 700;
  color: #f9fafb;
  padding: 7px 24px;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.45);
  background: #020617;
  box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  position: relative;
  overflow: visible;
  transition: all 0.2s ease;
}

/* BACKLIGHT LAYER – big soft halo behind the tab (always on) */
nav a.nav-glow::before {
  content: "";
  position: absolute;
  inset: -26px -34px;  /* how far the halo bleeds out */
  border-radius: 999px;
  background: radial-gradient(circle at center,
              var(--tab-glow-color, rgba(168, 85, 247, 0.6)) 0%,
              transparent 60%);
  opacity: 0.5;
  pointer-events: none;
  filter: blur(14px);
  z-index: -1;         /* keeps the glow behind the button */
  transition: opacity 0.25s ease;
}

/* Per-tab glow colors */
nav a.nav-music {
  --tab-glow-color: rgba(96, 165, 250, 0.7);   /* bright blue */
}

nav a.nav-visual {
  --tab-glow-color: rgba(45, 212, 191, 0.7);   /* teal / cyan */
}

nav a.nav-studio {
  --tab-glow-color: rgba(236, 72, 153, 0.7);   /* pink / magenta */
}

nav a.nav-explore {
  --tab-glow-color: rgba(234, 179, 8, 0.7);    /* gold / amber */
}

/* HOVER – gradient, glow, bounce + halo ON */
nav a.nav-glow:hover {
  background: linear-gradient(135deg, #a855f7, #3b82f6);
  color: #ffffff;
  box-shadow:
    0 0 18px rgba(168, 85, 247, 0.45),
    0 0 30px rgba(59, 130, 246, 0.45);

  animation:
    navGlowPulse 2.4s ease-in-out infinite,
    navBounce 0.6s ease-in-out infinite;
}

/* Show the backlight halo stronger on hover */
nav a.nav-glow:hover::before {
  opacity: 1;
}

/* Per-tab glow colors */
nav a.nav-music {
  --tab-glow-color: rgba(96, 165, 250, 0.7);   /* bright blue */
}

nav a.nav-visual {
  --tab-glow-color: rgba(45, 212, 191, 0.7);   /* teal / cyan */
}

nav a.nav-studio {
  --tab-glow-color: rgba(236, 72, 153, 0.7);   /* pink / magenta */
}

nav a.nav-explore {
  --tab-glow-color: rgba(234, 179, 8, 0.7);    /* gold / amber */
}
    nav a.active {
      color: var(--text-main);
      background: var(--accent-soft);
      border-color: rgba(168, 85, 247, 0.7);
      box-shadow: 0 0 12px rgba(168, 85, 247, 0.5);
    }

    .profile-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border-radius: 999px;
      padding: 6px 10px;
      border: 1px solid var(--border-soft);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), #020617);
      font-size: 12px;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.16s ease;
    }

    .profile-avatar {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: linear-gradient(135deg, #a855f7, #3b82f6);
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 700;
      color: #f9fafb;
    }

    .profile-badge:hover {
      border-color: rgba(168, 85, 247, 0.7);
      color: var(--text-main);
      box-shadow: 0 0 16px rgba(168, 85, 247, 0.5);
    }

    .profile-credits {
      font-size: 11px;
      color: var(--text-muted);
    }

    main {
      flex: 1;
    }

    /* ==== STUDIO OVERVIEW SECTION ==== */

    .studio-overview {
      max-width: 1200px;
      margin: 22px auto 0;
      padding: 0 16px 18px;
    }

    .studio-overview-title {
      font-size: 16px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .studio-overview-box {
      border-radius: 22px;
      padding: 16px;
      background: radial-gradient(circle at top left, #111827, #020617);
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.9);
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 16px;
    }

    .studio-stack {
      border-radius: 18px;
      padding: 12px;
      background: radial-gradient(circle at top left, #020617, #020617);
      border: 1px solid rgba(148, 163, 184, 0.35);
      position: relative;
      overflow: hidden;
    }

    .studio-stack::before {
      content: "";
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      background:
        radial-gradient(circle at top left, rgba(168, 85, 247, 0.35), transparent 60%),
        radial-gradient(circle at bottom right, rgba(56, 189, 248, 0.35), transparent 60%);
      opacity: 0.4;
      mix-blend-mode: screen;
      pointer-events: none;
      animation: slowGlow 8s ease-in-out infinite;
    }

    .studio-layer {
      border-radius: 16px;
      padding: 10px 12px;
      margin-bottom: 8px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: radial-gradient(circle at top, #020617, #020617);
      position: relative;
      font-size: 13px;
      text-align: center;
    }

    .studio-layer:nth-child(1) {
      border-color: rgba(168, 85, 247, 0.7);
      box-shadow: 0 0 20px rgba(168, 85, 247, 0.4);
    }

    .studio-layer:nth-child(2) {
      border-color: rgba(59, 130, 246, 0.8);
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
    }

    .studio-layer:nth-child(3) {
      border-color: rgba(45, 212, 191, 0.8);
      box-shadow: 0 0 20px rgba(45, 212, 191, 0.45);
    }

    .studio-arrow {
      text-align: center;
      font-size: 11px;
      color: var(--text-muted);
      margin: 3px 0;
    }

    .studio-roadmap-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .studio-roadmap-list {
      font-size: 13px;
      color: var(--text-muted);
      list-style: none;
      padding-left: 0;
    }

    .studio-roadmap-list li {
      margin-bottom: 4px;
    }

    /* HERO */

    .hero {
      max-width: 1200px;
      margin: 18px auto 0;
      padding: 0 16px 22px;
      border-bottom: 1px solid rgba(15, 23, 42, 0.9);
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 16px;
      align-items: flex-start;
    }

    .hero-left {
      padding-right: 4px;
    }

    .hero-kicker {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .hero-title {
      font-size: 30px;
      font-weight: 800;
      line-height: 1.1;
      margin-bottom: 10px;
    }

    .hero-title span {
      display: inline-block;
      background: linear-gradient(
        90deg,
        #a855f7,
        #3b82f6,
        #f97316,
        #22c55e,
        #a855f7
      );
      background-size: 220% 220%;
      -webkit-background-clip: text;
      color: transparent;
      text-shadow: 0 0 16px rgba(168, 85, 247, 0.4);
      animation: shimmer 6s linear infinite;
    }

    .hero-sub {
      font-size: 14px;
      color: var(--text-muted);
      max-width: 780px;
      line-height: 1.7;
      margin-bottom: 14px;
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-bottom: 10px;
    }

    .btn-primary {
      border-radius: 999px;
      padding: 9px 16px;
      font-size: 14px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, #a855f7, #3b82f6);
      color: #f9fafb;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 12px 28px rgba(129, 140, 248, 0.7);
      transition: transform 0.12s ease, box-shadow 0.12s ease, opacity 0.12s ease;
    }

    .btn-primary span.plus {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      font-weight: 700;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 36px rgba(129, 140, 248, 0.9);
      opacity: 0.97;
    }

    .btn-ghost {
      border-radius: 999px;
      padding: 8px 13px;
      font-size: 13px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text-muted);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.14s ease;
    }

    .btn-ghost:hover {
      border-color: rgba(148, 163, 184, 0.8);
      color: var(--text-main);
      background: rgba(15, 23, 42, 1);
    }

    .hero-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }

    .hero-tag-pill {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      color: var(--text-muted);
      background: rgba(15, 23, 42, 0.9);
    }

    .hero-right {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    /* PRODUCT CARDS */

    .product-card {
      border-radius: 18px;
      border: 1px solid var(--border-soft);
      background: radial-gradient(circle at top, #111827, #020617);
      padding: 14px 12px;
      box-shadow: 0 14px 32px rgba(15, 23, 42, 0.95);
      position: relative;
      overflow: hidden;
      min-height: 132px;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .product-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 50px rgba(59, 130, 246, 0.65);
    }

    .product-pill {
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: var(--text-muted);
      margin-bottom: 6px;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .product-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .product-desc {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .product-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-bottom: 4px;
    }

    .product-tag {
      font-size: 9px;
      border-radius: 999px;
      padding: 2px 6px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.9);
    }

    .product-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .product-link {
      font-size: 10px;
      color: #e5e7eb;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .shimmer-border {
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      background: conic-gradient(
        from 120deg,
        rgba(168, 85, 247, 0.7),
        rgba(59, 130, 246, 0.7),
        rgba(236, 72, 153, 0.7),
        rgba(234, 179, 8, 0.7),
        rgba(168, 85, 247, 0.7)
      );
      opacity: 0;
      mix-blend-mode: screen;
      pointer-events: none;
      animation: cardShimmer 10s linear infinite;
    }

    .product-card:hover .shimmer-border {
      opacity: 0.9;
    }

    .product-card-inner {
      position: relative;
      z-index: 1;
    }

    /* SECTIONS */

    .section {
      max-width: 1200px;
      margin: 22px auto 0;
      padding: 0 16px 22px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 10px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
    }

    .section-sub {
      font-size: 12px;
      color: var(--text-muted);
    }

    .plans-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 12px;
    }

    .plan-card {
      border-radius: 16px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.97);
      padding: 14px 12px;
      box-shadow: 0 14px 32px rgba(15, 23, 42, 0.95);
      font-size: 13px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease,
        border-color 0.15s ease;
    }

    .plan-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 24px 50px rgba(129, 140, 248, 0.8);
      border-color: rgba(168, 85, 247, 0.7);
    }

    .plan-ribbon,
    .plan-ribbon.gold {
      position: absolute;
      top: 8px;
      right: -28px;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #e5e7eb;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 3px 28px;
      transform: rotate(38deg);
      box-shadow: 0 8px 18px rgba(22, 163, 74, 0.6);
    }

    .plan-ribbon.gold {
      background: linear-gradient(135deg, #f97316, #eab308);
      box-shadow: 0 8px 18px rgba(234, 179, 8, 0.7);
    }

    .plan-name {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .plan-price {
      font-size: 13px;
      color: #e5e7eb;
      margin-bottom: 4px;
    }

    .plan-meta {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .plan-list {
      list-style: none;
      padding-left: 0;
      font-size: 12px;
      color: var(--text-muted);
    }

    .plan-list li {
      margin-bottom: 4px;
    }

    .credits-table {
      border-radius: 14px;
      border: 1px dashed rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.96);
      padding: 10px;
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 10px;
    }

    .credits-table-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 3px;
    }

    .yearly-note {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 8px;
      line-height: 1.5;
    }

    /* CONTACT */

    .contact-grid {
      display: grid;
      grid-template-columns: 2fr 1.4fr;
      gap: 14px;
      align-items: stretch;
    }

    .contact-card {
      border-radius: 16px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.97);
      padding: 14px 12px;
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.95);
      font-size: 13px;
    }

    label {
      font-size: 13px;
      display: block;
      margin-bottom: 4px;
      color: var(--text-main);
    }

    input[type="text"],
    input[type="email"],
    textarea,
    select {
      width: 100%;
      border-radius: 9px;
      border: 1px solid var(--border-soft);
      background: #020617;
      color: var(--text-main);
      padding: 8px 9px;
      font-size: 13px;
      outline: none;
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    input::placeholder,
    textarea::placeholder {
      color: #6b7280;
    }

    .contact-note {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 6px;
    }

    .payment-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    .payment-pill {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-muted);
    }

    /* PROFILE OVERLAY */

    .profile-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(10px);
      display: none;
      z-index: 40;
      align-items: stretch;
      justify-content: flex-end;
    }

    .profile-overlay.show {
      display: flex;
    }

    .profile-panel {
      width: min(380px, 100%);
      background: #020617;
      border-left: 1px solid var(--border-soft);
      box-shadow: -20px 0 40px rgba(0, 0, 0, 0.8);
      display: flex;
      flex-direction: column;
    }

    .profile-header {
      padding: 12px 14px;
      border-bottom: 1px solid var(--border-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .profile-header-main {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .profile-avatar-lg {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: linear-gradient(135deg, #a855f7, #3b82f6);
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
      color: #f9fafb;
    }

    .profile-header-text-main {
      font-size: 14px;
      font-weight: 600;
    }

    .profile-header-text-sub {
      font-size: 11px;
      color: var(--text-muted);
    }

    .close-btn {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-muted);
      cursor: pointer;
      font-size: 13px;
      padding: 6px 9px;
    }

    .profile-body {
      display: grid;
      grid-template-columns: 115px minmax(0, 1fr);
      flex: 1;
      min-height: 0;
    }

    .profile-menu {
      border-right: 1px solid var(--border-soft);
      padding: 10px 8px;
      font-size: 12px;
    }

    .profile-menu button {
      width: 100%;
      text-align: left;
      border-radius: 9px;
      border: 1px solid transparent;
      background: transparent;
      color: var(--text-muted);
      padding: 6px 7px;
      cursor: pointer;
      margin-bottom: 4px;
      font-size: 12px;
      transition: all 0.15s ease;
    }

    .profile-menu button.active {
      background: rgba(15, 23, 42, 0.96);
      border-color: rgba(148, 163, 184, 0.7);
      color: var(--text-main);
    }

    .profile-content {
      padding: 10px 11px;
      overflow-y: auto;
      font-size: 13px;
    }

    .profile-section-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .profile-section-sub {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .profile-line {
      font-size: 13px;
      margin-bottom: 4px;
    }

    .profile-small {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      font-size: 11px;
      color: var(--text-muted);
      background: rgba(15, 23, 42, 0.96);
      margin-right: 4px;
      margin-bottom: 4px;
      cursor: pointer;
    }

    .chip.disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .profile-footer {
      padding: 8px 12px;
      border-top: 1px solid var(--border-soft);
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
    }

    .profile-footer button {
      border-radius: 999px;
      border: 1px solid rgba(248, 113, 113, 0.7);
      background: rgba(15, 23, 42, 0.96);
      color: #fecaca;
      cursor: pointer;
      font-size: 11px;
      padding: 5px 9px;
    }

    /* FOOTER */

    footer {
      border-top: 1px solid var(--border-soft);
      padding: 10px 16px 14px;
      font-size: 11px;
      color: var(--text-muted);
      text-align: center;
      background: rgba(2, 6, 23, 0.97);
      margin-top: 18px;
    }

    /* PLAN DETAIL OVERLAY */

    .plan-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.92);
      backdrop-filter: blur(10px);
      display: none;
      z-index: 35;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .plan-overlay.show {
      display: flex;
    }

    .plan-dialog {
      width: min(520px, 100%);
      border-radius: 20px;
      background: #020617;
      border: 1px solid var(--border-soft);
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.9);
      padding: 16px 18px 14px;
    }

    .plan-dialog-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 10px;
      gap: 8px;
    }

    .plan-dialog-title {
      font-size: 18px;
      font-weight: 600;
    }

    .plan-dialog-sub {
      font-size: 12px;
      color: var(--text-muted);
    }

    .toggle-pill {
      display: inline-flex;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.98);
      overflow: hidden;
      font-size: 12px;
    }

    .toggle-pill button {
      border: none;
      background: transparent;
      padding: 6px 10px;
      color: var(--text-muted);
      cursor: pointer;
    }

    .toggle-pill button.active {
      background: linear-gradient(135deg, #a855f7, #3b82f6);
      color: #f9fafb;
    }

    .plan-dialog-body {
      font-size: 13px;
      color: var(--text-muted);
    }

    .price-row {
      display: flex;
      align-items: baseline;
      gap: 10px;
      margin-bottom: 4px;
    }

    .price-main {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-main);
    }

    .price-note {
      font-size: 12px;
      color: var(--text-muted);
    }

    .price-strike {
      text-decoration: line-through;
      color: #6b7280;
      font-size: 12px;
    }

    .price-save {
      font-size: 12px;
      color: #22c55e;
    }

    .plan-dialog-footer {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .plan-dialog-footer .btn-primary {
      box-shadow: 0 14px 30px rgba(129, 140, 248, 0.8);
    }

    /* ANIMATIONS */

    @keyframes spinGlow {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes glowPulse {
      0%, 100% { opacity: 0.7; text-shadow: 0 0 6px rgba(244, 114, 182, 0.3); }
      50% { opacity: 1; text-shadow: 0 0 16px rgba(244, 114, 182, 0.7); }
    }

    @keyframes shimmer {
      0% {
        background-position: 0% 50%;
        text-shadow: 0 0 12px rgba(168, 85, 247, 0.5);
      }
      100% {
        background-position: 200% 50%;
        text-shadow: 0 0 22px rgba(59, 130, 246, 0.8);
      }
    }

    @keyframes cardShimmer {
      0% {
        transform: translate3d(-15%, -15%, 0) rotate(0deg);
      }
      100% {
        transform: translate3d(15%, 15%, 0) rotate(360deg);
      }
    }

    @keyframes slowGlow {
      0%, 100% {
        opacity: 0.25;
      }
      50% {
        opacity: 0.7;
      }
    }

   /* Soft breathing pulse */
@keyframes navGlowPulse {
  0% {
    box-shadow:
      0 0 14px rgba(168, 85, 247, 0.3),
      0 0 22px rgba(59, 130, 246, 0.3);
  }
  50% {
    box-shadow:
      0 0 22px rgba(168, 85, 247, 0.45),
      0 0 32px rgba(59, 130, 246, 0.45);
  }
  100% {
    box-shadow:
      0 0 14px rgba(168, 85, 247, 0.3),
      0 0 22px rgba(59, 130, 246, 0.3);
  }
}


/* Bounce animation */
@keyframes navBounce {
  0%   { transform: translateY(0); }
  25%  { transform: translateY(-5px); }
  50%  { transform: translateY(0); }
  75%  { transform: translateY(-4px); }
  100% { transform: translateY(0); }
}

    @media (max-width: 960px) {
      .studio-overview-box {
        grid-template-columns: minmax(0, 1fr);
      }
      .hero {
        grid-template-columns: minmax(0, 1fr);
      }
      .hero-right {
        order: -1;
      }
      .plans-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      .contact-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 640px) {
      .header-inner {
        flex-direction: column;
        align-items: flex-start;
      }
      .hero-title {
        font-size: 24px;
      }
      .plans-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }
  </style>
</head>

<body>
<header>
  <div class="header-inner">
    <div class="logo">
  <div class="logo-circle"></div>
  <div>
    <div class="logo-text-main">SULANDRA</div>
    <div class="logo-text-sub">Music Lab · Visual Lab · Studio · Explore</div>
  </div>
</div>

    <div class="nav-group">
      <nav>
  <a href="index.html" class="active">Home</a>

  <a href="music.html"
     class="nav-glow nav-music">Music Lab</a>

  <a href="lab.html"
     class="nav-glow nav-visual">Visual Lab</a>

  <a href="studio.html"
     class="nav-glow nav-studio">Studio</a>

  <a href="education.html"
     class="nav-glow nav-explore">Explore</a>
</nav>

      <button type="button" class="profile-badge" onclick="toggleProfile()">
        <div class="profile-avatar" id="profile-avatar"></div>
        <div>
          <div id="profile-label">Sign in</div>
          <div class="profile-credits" id="profile-credits">...</div>
        </div>
      </button>
    </div>
  </div>
</header>

<main>
  <!-- STUDIO OVERVIEW -->
  <section class="studio-overview">
    <div class="studio-overview-title">Studio overview</div>
    <div class="studio-overview-box">
      <div class="studio-stack">
        <div class="studio-layer">
          <strong>Sulandra AI Studio UI</strong><br />
          <span style="font-size:11px; color:var(--text-muted);">
            This website · Image / Music / Video / Short Films · Studio editor
          </span>
        </div>
        <div class="studio-arrow">↓</div>
        <div class="studio-layer">
          <strong>Firebase Backend</strong><br />
          <span style="font-size:11px; color:var(--text-muted);">
            Authentication · Real-time Credits · Plan Management
          </span>
        </div>
        <div class="studio-arrow">↓</div>
        <div class="studio-layer">
          <strong>Runpod GPU workers</strong><br />
          <span style="font-size:11px; color:var(--text-muted);">
            Your image, music, video & film models running on GPUs
          </span>
        </div>
      </div>

      <div>
        <div class="studio-roadmap-title">Roadmap</div>
        <ul class="studio-roadmap-list">
          <li>1. Static UI (Complete).</li>
          <li>2. Firebase Auth & Database (Connected).</li>
          <li>3. Connect API → Runpod workers for image generation.</li>
          <li>4. Expand to music, video and short film pipelines.</li>
        </ul>
        <div class="profile-small" style="margin-top:8px;">
          This version is connected to Firebase. Log in to see your real credits managed in Firestore.
        </div>
      </div>
    </div>
  </section>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-left">
      <div class="hero-kicker">Unified creation platform</div>
      <h1 class="hero-title">
        One brain for <span>images, music, video and short films.</span>
      </h1>
      <p class="hero-sub">
        Sulandra AI Studio connects everything: generate images, songs, videos
        and short films in one place. Use your credits across all tools, move a
        generated image into a video, or drop a song straight into a short film
        or Studio project without downloading anything.
      </p>

      <div class="hero-actions">
        <button class="btn-primary" onclick="toggleProfile()">
          <span class="plus">+</span>
          Get started – choose a plan
        </button>
        <button class="btn-ghost" onclick="scrollToSection('plans')">
          View plans & credits
        </button>
      </div>

      <div class="hero-tags">
        <div class="hero-tag-pill">Basic – Free · 50 credits · watermark</div>
        <div class="hero-tag-pill">Pro – $20 · 2500 credits</div>
        <div class="hero-tag-pill">Creator – $30 · 5000 credits</div>
        <div class="hero-tag-pill">Creator Ultimate – $45 · 10000 credits</div>
      </div>
    </div>

    <div class="hero-right">
      <!-- IMAGE LAB -->
      <article class="product-card" onclick="goToLab('image.html')">
        <div class="shimmer-border"></div>
        <div class="product-card-inner">
          <div class="product-pill">IMAGE LAB</div>
          <h3 class="product-title">Image · Outfit · Edit</h3>
          <p class="product-desc">
            Text-to-image, image-to-image, outfit swap, pose changes,
            inpainting and style reference. Each image uses <strong>5 credits</strong>.
          </p>
          <div class="product-tags">
            <span class="product-tag">Text → Image</span>
            <span class="product-tag">Image → Image</span>
            <span class="product-tag">Outfit / pose</span>
            <span class="product-tag">Storyboards</span>
          </div>
          <div class="product-footer">
            <span>Basic: UHD preview + watermark</span>
            <span class="product-link">Open Image Lab →</span>
          </div>
        </div>
      </article>

      <!-- MUSIC LAB -->
      <article class="product-card" onclick="goToLab('music.html')">
        <div class="shimmer-border"></div>
        <div class="product-card-inner">
          <div class="product-pill">MUSIC LAB</div>
          <h3 class="product-title">Music · Lyrics · Vocals</h3>
          <p class="product-desc">
            Generate full songs, stems and lyric drafts. Train vocal styles and
            reuse them across videos and short films. Each song uses
            <strong>10 credits</strong>.
          </p>
          <div class="product-tags">
            <span class="product-tag">Song generation</span>
            <span class="product-tag">AI lyric help</span>
            <span class="product-tag">Vocal training</span>
            <span class="product-tag">Stems & MIDI (Ultimate)</span>
          </div>
          <div class="product-footer">
            <span>Stems & MIDI: 50 credits (Ultimate)</span>
            <span class="product-link">Open Music Lab →</span>
          </div>
        </div>
      </article>

      <!-- VIDEO LAB -->
      <article class="product-card" onclick="goToLab('video.html')">
        <div class="shimmer-border"></div>
        <div class="product-card-inner">
          <div class="product-pill">VIDEO LAB</div>
          <h3 class="product-title">Video · Edits · Lip sync</h3>
          <p class="product-desc">
            Text-to-video, image-to-video and reference-based clips. Add lip
            sync using generated or uploaded audio. Base video uses
            <strong>10 credits</strong>, lip sync adds <strong>+10 credits</strong>.
          </p>
          <div class="product-tags">
            <span class="product-tag">Text → Video</span>
            <span class="product-tag">Image → Video</span>
            <span class="product-tag">YouTube reference</span>
            <span class="product-tag">Lip sync</span>
          </div>
          <div class="product-footer">
            <span>4K: Creator & up · WAV for Pro & up</span>
            <span class="product-link">Open Video Lab →</span>
          </div>
        </div>
      </article>

      <!-- SHORT FILMS -->
      <article class="product-card" onclick="goToLab('film.html')">
        <div class="shimmer-border"></div>
        <div class="product-card-inner">
          <div class="product-pill">SHORT FILMS</div>
          <h3 class="product-title">Short films · Scenes</h3>
          <p class="product-desc">
            Build multi-scene short films with scripts, storyboards, and linked
            music from Studio. Each short film uses <strong>100 credits</strong>.
          </p>
          <div class="product-tags">
            <span class="product-tag">Script → Film</span>
            <span class="product-tag">Storyboard</span>
            <span class="product-tag">Multi-scene</span>
            <span class="product-tag">Studio export</span>
          </div>
          <div class="product-footer">
            <span>Designed for Creator Ultimate</span>
            <span class="product-link">Open Short Films →</span>
          </div>
        </div>
      </article>
    </div>
  </section>

  <!-- PLANS & CREDITS -->
  <section class="section" id="plans">
    <div class="section-header">
      <div class="section-title">Plans, credits & add-ons</div>
      <div class="section-sub">
        Click a plan to see monthly vs yearly pricing and signup details.
      </div>
    </div>

    <div class="plans-grid">
      <!-- BASIC -->
      <div class="plan-card" onclick="openPlanDetails('basic')">
        <div class="plan-name">Basic</div>
        <div class="plan-price">$0 / month · 50 credits</div>
        <div class="plan-meta">
          Free plan with UHD-quality previews and a Sulandra watermark on every export.
          Perfect for testing the real quality before subscribing.
        </div>
        <ul class="plan-list">
          <li>• 50 credits per month included</li>
          <li>• Image, Music, Video & Short Film previews</li>
          <li>• UHD and higher previews allowed</li>
          <li>• MP3-only audio, always with watermark</li>
          <li>• Watermark on all visuals</li>
          <li>• Cannot buy extra credits or add-ons</li>
        </ul>
      </div>

      <!-- PRO -->
      <div class="plan-card" onclick="openPlanDetails('pro')">
        <div class="plan-name">Pro</div>
        <div class="plan-price">$20 / month · 2500 credits</div>
        <div class="plan-meta">
          For serious creators who need clean exports, WAV audio and higher resolutions,
          with optional Ultimate packs.
        </div>
        <ul class="plan-list">
          <li>• 2500 credits per month included</li>
          <li>• Clean outputs, no watermark</li>
          <li>• WAV + MP3 audio export</li>
          <li>• HD / UHD visuals (4K where supported)</li>
          <li>• Can buy credit packs</li>
          <li>• Optional Music / Image / Video Ultimate add-ons (+$5 each)</li>
        </ul>
      </div>

      <!-- CREATOR -->
      <div class="plan-card" onclick="openPlanDetails('creator')">
        <div class="plan-ribbon">Best value</div>
        <div class="plan-name">Creator</div>
        <div class="plan-price">$30 / month · 5000 credits</div>
        <div class="plan-meta">
          For power users who want 4K, Studio workflows and Ultimate add-ons,
          with enough credits for real monthly projects.
        </div>
        <ul class="plan-list">
          <li>• 5000 credits per month included</li>
          <li>• 4K support for visuals where available</li>
          <li>• WAV export and clean outputs</li>
          <li>• Full Studio access for Music & Video</li>
          <li>• Can buy extra credit packs</li>
          <li>• Can add Music / Image / Video Ultimate for deep control</li>
        </ul>
      </div>

      <!-- CREATOR ULTIMATE -->
      <div class="plan-card" onclick="openPlanDetails('creatorUltimate')">
        <div class="plan-ribbon gold">Best overall</div>
        <div class="plan-name">Creator Ultimate</div>
        <div class="plan-price">$45 / month · 10000 credits</div>
        <div class="plan-meta">
          Everything unlocked. Designed for full productions, short films and
          heavy Studio use across all categories.
        </div>
        <ul class="plan-list">
          <li>• 10000 credits per month included</li>
          <li>• 4K support across visual tools where available</li>
          <li>• Full Studio + Short Film workflow</li>
          <li>• Stems & MIDI export for 50 credits per song</li>
          <li>• All Ultimate features included</li>
          <li>• Priority for future Sulandra AI Studio features</li>
        </ul>
      </div>
    </div>

    <div class="credits-table">
      <div class="credits-table-row">
        <strong>Credit usage per feature:</strong><span></span>
      </div>
      <div class="credits-table-row">
        <span>• 1 image (text or simple image-to-image)</span><span>5 credits</span>
      </div>
      <div class="credits-table-row">
        <span>• Advanced image-to-image / heavy edit</span><span>15 credits</span>
      </div>
      <div class="credits-table-row">
        <span>• 1 song / music generation</span><span>10 credits</span>
      </div>
      <div class="credits-table-row">
        <span>• Text-to-video clip</span><span>10 credits</span>
      </div>
      <div class="credits-table-row">
        <span>• YouTube reference (learn style)</span><span>10 credits</span>
      </div>
      <div class="credits-table-row">
        <span>• Lip sync add-on for a video</span><span>+10 credits</span>
      </div>
      <div class="credits-table-row">
        <span>• Stems + MIDI export (Ultimate)</span><span>50 credits</span>
      </div>
      <div class="credits-table-row">
        <span>• Short film (multi-scene)</span><span>100 credits</span>
      </div>

      <div style="margin-top:8px; margin-bottom:4px;">
        <strong>Buy extra credits (Pro / Creator / Creator Ultimate only):</strong>
      </div>
      <div class="credits-table-row">
        <span>100 credits</span><span>$5</span>
      </div>
      <div class="credits-table-row">
        <span>200 credits</span><span>$8</span>
      </div>
      <div class="credits-table-row">
        <span>300 credits</span><span>$10</span>
      </div>

      <div class="yearly-note">
        <strong>Yearly subscriptions:</strong><br />
        • Pro: $228 / year (5% discount) – normal $240<br />
        • Creator: $331.20 / year (8% discount) – normal $360<br />
        • Creator Ultimate: $486 / year (10% discount) – normal $540<br />
        Users can upgrade or downgrade at any time. New users can start with a
        7-day free trial on a chosen paid plan (valid payment required;
        exports disabled during the trial).
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section class="section">
    <div class="section-header">
      <div class="section-title">Contact us · Leave a message</div>
      <div class="section-sub">
        Questions about plans, credits, Studio or custom models? Send us a message.
      </div>
    </div>

    <div class="contact-grid">
      <div class="contact-card">
        <form onsubmit="event.preventDefault(); handleContact();">
          <div style="margin-bottom:8px;">
            <label for="contact-name">Name</label>
            <input id="contact-name" type="text" placeholder="Your name" />
          </div>
          <div style="margin-bottom:8px;">
            <label for="contact-email">Email</label>
            <input id="contact-email" type="email" placeholder="you@example.com" />
          </div>
          <div style="margin-bottom:8px;">
            <label for="contact-topic">Topic</label>
            <select id="contact-topic">
              <option>Plans & credits</option>
              <option>Billing / payments</option>
              <option>Technical issue</option>
              <option>Feature request</option>
              <option>General question</option>
            </select>
          </div>
          <div style="margin-bottom:8px;">
            <label for="contact-message">Message</label>
            <textarea id="contact-message" placeholder="Tell us what you need help with..."></textarea>
          </div>
          <button type="submit" class="btn-primary">
            <span class="plus">+</span>
            Send message
          </button>
          <div class="contact-note" id="contact-note">
            We’ll reply to you by email. In the real app, this will create a support ticket.
          </div>
        </form>
      </div>

      <div class="contact-card">
        <div class="profile-section-title">Payments & methods</div>
        <div class="profile-section-sub">
          In your profile, users manage subscriptions, credit packs and payment methods.
        </div>
        <div class="profile-small">
          Supported methods (UI preview):
        </div>
        <div class="payment-badges">
          <div class="payment-pill">PayPal</div>
          <div class="payment-pill">Visa / Mastercard</div>
          <div class="payment-pill">Apple Pay</div>
        </div>
        <div class="profile-small" style="margin-top:10px;">
          In the real system:
        </div>
        <ul class="plan-list">
          <li>• Users pick a plan (Basic, Pro, Creator, Creator Ultimate).</li>
          <li>• They can start a 7-day trial with a valid payment method.</li>
          <li>• They can upgrade/downgrade anytime from Profile → Subscription.</li>
          <li>• They can add or remove Ultimate add-ons per category.</li>
        </ul>
      </div>
    </div>
  </section>
</main>

<footer>
  Sulandra AI Studio · One credit system, one brain. Plans, trials and payments are managed from the Profile.
</footer>

<!-- PROFILE OVERLAY -->
<div class="profile-overlay" id="profile-overlay">
  <div class="profile-panel">
    <div class="profile-header">
      <div class="profile-header-main">
        <div class="profile-avatar-lg" id="profile-avatar-lg"></div>
        <div>
          <div class="profile-header-text-main" id="profile-name">Guest</div>
          <div class="profile-header-text-sub" id="profile-plan-label">
            Not signed in
          </div>
        </div>
      </div>
      <button class="close-btn" type="button" onclick="toggleProfile()">Close</button>
    </div>

    <div class="profile-body">
      <div class="profile-menu">
        <button id="menu-overview" class="active" onclick="setProfileSection('overview')">View profile</button>
        <button onclick="setProfileSection('edit')">Edit profile</button>
        <button onclick="setProfileSection('invite')">Invite friends</button>
        <button onclick="setProfileSection('subscription')">Subscription</button>
        <button onclick="setProfileSection('account')">Manage account</button>
        <button onclick="setProfileSection('theme')">Theme</button>
      </div>

      <div class="profile-content" id="profile-content">
        <!-- Filled by JS -->
      </div>
    </div>

    <div class="profile-footer">
      <div>Sulandra Identity System</div>
      <button type="button" id="sign-toggle" onclick="handleAuthAction()">Sign in</button>
    </div>
  </div>
</div>

<!-- PLAN DETAIL OVERLAY -->
<div class="plan-overlay" id="plan-overlay">
  <div class="plan-dialog">
    <div class="plan-dialog-header">
      <div>
        <div class="plan-dialog-title" id="plan-dialog-title">Pro plan</div>
        <div class="plan-dialog-sub" id="plan-dialog-sub">
          Full access to WAV export, HD/UHD quality and credit packs.
        </div>
      </div>
      <div class="toggle-pill">
        <button type="button" id="toggle-monthly" class="active" onclick="setPlanBilling('monthly')">
          Monthly
        </button>
        <button type="button" id="toggle-yearly" onclick="setPlanBilling('yearly')">
          Yearly
        </button>
      </div>
    </div>

    <div class="plan-dialog-body">
      <div class="price-row">
        <div class="price-main" id="plan-price-main">$20</div>
        <div class="price-note" id="plan-price-note">per month · 2500 credits</div>
      </div>
      <div class="price-row" id="price-row-yearly" style="display:none;">
        <div class="price-strike" id="plan-price-strike">$240 / year</div>
        <div class="price-save" id="plan-price-save">You save $12 (5%)</div>
      </div>
      <div class="profile-small" id="plan-dialog-extra">
        Choose monthly for flexibility, or yearly for the best price. A 7-day free trial is available for new users (no exports until trial converts).
      </div>
    </div>

    <div class="plan-dialog-footer">
      <button class="btn-primary" type="button" onclick="startSignup()">
        <span class="plus">+</span>
        Continue – signup & payment
      </button>
      <button class="btn-ghost" type="button" onclick="closePlanDetails()">
        Cancel
      </button>
    </div>
  </div>
</div>

<script type="module">
  // Import Firebase SDKs
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { 
    getAuth, 
    GoogleAuthProvider, 
    signInWithPopup, 
    signOut, 
    onAuthStateChanged 
  } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
  import { 
    getFirestore, 
    doc, 
    setDoc, 
    getDoc, 
    onSnapshot 
  } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

  // Configuration
  const firebaseConfig = {
    apiKey: "AIzaSyCAc_nTzVoK1IwwT2FtsY6psNQaUBCtqNM",
    authDomain: "sulandra-studio.firebaseapp.com",
    projectId: "sulandra-studio",
    storageBucket: "sulandra-studio.firebasestorage.app",
    messagingSenderId: "1017519342348",
    appId: "1:1017519342348:web:539db9a2a23d35f32b7f29",
    measurementId: "G-FD6Z8MNRHF"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const provider = new GoogleAuthProvider();

  // State
  let currentUser = null;
  let userData = {
    name: "Guest",
    plan: "basic",
    credits: 0,
    maxCredits: 0
  };
  let unsubscribeDoc = null; // To stop listening to Firestore when logging out

  // --- AUTH LOGIC ---

  // Attached to window for HTML button access
  window.handleAuthAction = async () => {
    if (currentUser) {
      // Sign out
      try {
        await signOut(auth);
        console.log("Signed out");
      } catch (error) {
        console.error("Sign out error", error);
      }
    } else {
      // Sign in
      try {
        await signInWithPopup(auth, provider);
        console.log("Signed in");
      } catch (error) {
        console.error("Sign in error", error);
        alert("Sign in failed: " + error.message);
      }
    }
  };

  // Auth Listener
  onAuthStateChanged(auth, async (user) => {
    currentUser = user;
    
    if (user) {
      // 1. User is signed in
      const userRef = doc(db, "users", user.uid);
      
      // 2. Real-time listener for user data
      unsubscribeDoc = onSnapshot(userRef, async (docSnap) => {
        if (docSnap.exists()) {
            // Existing user - update state from DB
            userData = docSnap.data();
            updateUI();
        } else {
            // New user - Create document
            const newUserData = {
                name: user.displayName || "User",
                email: user.email,
                plan: "basic",
                credits: 50,
                maxCredits: 50,
                createdAt: new Date().toISOString()
            };
            await setDoc(userRef, newUserData);
            // The listener will catch this update immediately after
        }
      });
      
    } else {
      // User is signed out
      if (unsubscribeDoc) unsubscribeDoc(); // Stop listening
      userData = { name: "Guest", plan: "basic", credits: 0, maxCredits: 0 };
      updateUI();
    }
  });


  // --- UI LOGIC ---

  const planConfig = {
    basic: { name: "Basic", description: "Free plan" },
    pro: { name: "Pro", description: "Standard creative plan" },
    creator: { name: "Creator", description: "Power user plan" },
    creatorUltimate: { name: "Creator Ultimate", description: "Full access" }
  };

  function updateUI() {
    // Header & Profile updates
    const avatarEl = document.getElementById("profile-avatar");
    const avatarLgEl = document.getElementById("profile-avatar-lg");
    
    // Avatar logic
    if (currentUser && currentUser.photoURL) {
        const url = `url('${currentUser.photoURL}')`;
        avatarEl.style.backgroundImage = url;
        avatarLgEl.style.backgroundImage = url;
        avatarEl.textContent = "";
        avatarLgEl.textContent = "";
    } else {
        const initial = userData.name.charAt(0).toUpperCase();
        avatarEl.style.backgroundImage = "none";
        avatarLgEl.style.backgroundImage = "none";
        avatarEl.textContent = initial;
        avatarLgEl.textContent = initial;
    }

    // Text updates
    document.getElementById("profile-name").textContent = userData.name;
    document.getElementById("profile-label").textContent = currentUser ? "Profile" : "Sign in";
    
    // Credits display
    const creditText = `${userData.credits} credits`;
    document.getElementById("profile-credits").textContent = creditText;
    
    // Profile Panel updates
    const planName = planConfig[userData.plan]?.name || userData.plan;
    document.getElementById("profile-plan-label").textContent = currentUser ? `Plan: ${planName}` : "Not signed in";
    document.getElementById("sign-toggle").textContent = currentUser ? "Sign out" : "Sign in with Google";

    // Refresh current open section if overlay is open
    const content = document.getElementById("profile-content");
    if (content.innerHTML !== "") {
        // Simple re-render of current view (assuming Overview is default)
        // Ideally we track currentSection, but for this basic logic, we refresh Overview if active
        // or just let the user navigate.
    }
  }
  
  // --- MODULE HELPERS EXPORTED TO WINDOW ---
  // We need to attach these to window because the HTML onclick attributes need to find them.
  
  let currentPlanKey = "pro";
  let currentBilling = "monthly";

  window.toggleProfile = () => {
    const overlay = document.getElementById("profile-overlay");
    overlay.classList.toggle("show");
    if (overlay.classList.contains("show")) {
      window.setProfileSection("overview");
    }
  };

  window.setProfileSection = (section) => {
    // Button styling
    document.querySelectorAll(".profile-menu button").forEach(btn => btn.classList.remove("active"));
    if (section === "overview") document.getElementById("menu-overview").classList.add("active");
    else {
        const btn = document.querySelector(`.profile-menu button[onclick*="${section}"]`);
        if(btn) btn.classList.add("active");
    }

    const content = document.getElementById("profile-content");
    
    if (section === "overview") {
      const planName = planConfig[userData.plan]?.name || userData.plan;
      content.innerHTML = `
        <div class="profile-section-title">Profile overview</div>
        <div class="profile-section-sub">
          ${currentUser ? "Manage your account settings." : "Please sign in to view your profile."}
        </div>
        <div class="profile-line"><strong>Name:</strong> ${userData.name}</div>
        <div class="profile-line"><strong>Current plan:</strong> ${planName}</div>
        <div class="profile-line"><strong>Credits:</strong> ${userData.credits} available</div>
        <div class="profile-small">
          Email: ${currentUser ? currentUser.email : "N/A"}
        </div>
      `;
    } else if (section === "edit") {
       content.innerHTML = `
        <div class="profile-section-title">Edit profile</div>
        <div class="profile-section-sub">Settings are managed via Google Account for now.</div>
      `;
    } else if (section === "subscription") {
      const planName = planConfig[userData.plan]?.name || userData.plan;
      content.innerHTML = `
        <div class="profile-section-title">Subscription</div>
        <div class="profile-line"><strong>Current plan:</strong> ${planName}</div>
        <div class="profile-line"><strong>Credits:</strong> ${userData.credits}</div>
        <div class="profile-small">
          To upgrade, select a plan from the home page.
        </div>
      `;
    } else {
        content.innerHTML = `<div class="profile-section-title">${section}</div><div class="profile-small">Feature coming soon.</div>`;
    }
  };

  // Plan Modal Logic
  window.openPlanDetails = (key) => {
    currentPlanKey = key;
    currentBilling = "monthly";
    updatePlanDialog();
    document.getElementById("plan-overlay").classList.add("show");
  };

  window.closePlanDetails = () => {
    document.getElementById("plan-overlay").classList.remove("show");
  };

  window.setPlanBilling = (mode) => {
    currentBilling = mode;
    updatePlanDialog();
  };
  
  window.startSignup = () => {
    if(!currentUser) {
        alert("Please sign in first to subscribe to a plan.");
        window.handleAuthAction();
    } else {
        alert(`Integration Step: Proceed to checkout for ${currentPlanKey} (${currentBilling}).`);
        window.closePlanDetails();
    }
  };

  function updatePlanDialog() {
    // Config for display only
    const displayConfig = {
        basic: { name: "Basic", monthly: 0, credits: "50 credits", desc: "Start for free." },
        pro: { name: "Pro", monthly: 20, yearly: 228, credits: "2500 credits", desc: "Serious creators." },
        creator: { name: "Creator", monthly: 30, yearly: 331, credits: "5000 credits", desc: "Power users." },
        creatorUltimate: { name: "Creator Ultimate", monthly: 45, yearly: 486, credits: "10000 credits", desc: "Everything unlocked." }
    };

    const config = displayConfig[currentPlanKey];
    document.getElementById("plan-dialog-title").textContent = config.name;
    document.getElementById("plan-dialog-sub").textContent = config.desc;

    const monthlyBtn = document.getElementById("toggle-monthly");
    const yearlyBtn = document.getElementById("toggle-yearly");
    monthlyBtn.classList.toggle("active", currentBilling === "monthly");
    yearlyBtn.classList.toggle("active", currentBilling === "yearly");

    const priceMain = document.getElementById("plan-price-main");
    const rowYearly = document.getElementById("price-row-yearly");

    if (currentBilling === "monthly") {
        priceMain.textContent = "$" + config.monthly;
        rowYearly.style.display = "none";
    } else {
        priceMain.textContent = "$" + (config.yearly || 0);
        rowYearly.style.display = "flex";
    }
  }

  // Navigation
  window.goToLab = (path) => {
    window.location.href = path;
  };

  window.scrollToSection = (id) => {
    const el = document.getElementById(id);
    if (!el) return;
    el.scrollIntoView({ behavior: "smooth", block: "start" });
  };
  
  // Initialize UI once
  updateUI();

</script>
</body>
</html>
