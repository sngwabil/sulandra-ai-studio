<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sulandra Creative Studio ‚Äì SOUND</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #02061a;
      --bg-soft: #050b26;
      --panel: #071133;
      --panel-soft: #0c1a4a;
      --panel-alt: #101f5c;
      --accent: #4ddfff;
      --accent-2: #7b5dff;
      --accent-3: #ffcc4d;
      --accent-4: #ff5a9e;
      --border-soft: rgba(164, 193, 255, 0.4);
      --text-main: #f5f7ff;
      --text-muted: #a5b0e5;
      --radius-xl: 18px;
      --radius-lg: 14px;
      --radius-pill: 999px;
      --shadow-soft: 0 0 40px rgba(0, 0, 0, 0.9);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Inter", sans-serif;
      background:
        radial-gradient(circle at top left, #3145ff 0, #02061a 45%, #010314 100%);
      color: var(--text-main);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* HEADER / BRAND */

    header {
      padding: 10px 18px 6px;
      border-bottom: 1px solid rgba(102, 153, 255, 0.4);
      backdrop-filter: blur(18px);
      background: linear-gradient(
        to right,
        rgba(2, 6, 26, 0.96),
        rgba(2, 6, 26, 0.86)
      );
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
      z-index: 1000;
    }

    .header-inner {
      max-width: 1360px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    .brand-block {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-icon {
      width: 32px;
      height: 32px;
      border-radius: 12px;
      background: conic-gradient(
        from 210deg,
        #4ddfff,
        #7b5dff,
        #ffcc4d,
        #ff5a9e,
        #4ddfff
      );
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      font-size: 18px;
      color: #02061a;
      box-shadow: 0 0 18px rgba(77, 223, 255, 0.9);
    }

    .brand-labels {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .brand-main {
      font-size: 13px;
      letter-spacing: 0.13em;
      text-transform: uppercase;
      font-weight: 650;
      color: #e5ecff;
    }

    .brand-sub {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--accent-3);
    }

    .brand-mode {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(132, 173, 255, 0.7);
      background: radial-gradient(
        circle at top left,
        rgba(132, 173, 255, 0.3),
        rgba(3, 6, 24, 0.96)
      );
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #c5d4ff;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .session-pill {
      padding: 5px 10px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(132, 173, 255, 0.7);
      background: radial-gradient(
        circle at top left,
        rgba(71, 122, 255, 0.4),
        rgba(2, 6, 24, 0.96)
      );
      font-size: 11px;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #dbe4ff;
    }

    .session-pill span strong {
      color: var(--accent-3);
    }

    .profile-chip {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 5px 10px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(134, 191, 255, 0.7);
      background: rgba(5, 11, 40, 0.98);
      font-size: 11px;
      cursor: pointer;
    }

    .profile-avatar {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: linear-gradient(135deg, #4ddfff, #ff5a9e);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #02061a;
      font-weight: 700;
      font-size: 13px;
    }

    .profile-plan {
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(65, 105, 255, 0.2);
      border: 1px solid rgba(170, 200, 255, 0.9);
      text-transform: uppercase;
      letter-spacing: 0.14em;
      font-size: 9px;
      color: #e6edff;
    }

    /* DOCK ICONS (Timeline, Mixer, Patterns, etc.) */

    .dock-row {
      max-width: 1360px;
      margin: 6px auto 0;
      padding: 0 18px 8px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .dock-icons {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .dock-icon {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: var(--radius-pill);
      background: radial-gradient(
        circle at top left,
        rgba(77, 223, 255, 0.25),
        rgba(5, 11, 38, 0.95)
      );
      border: 1px solid rgba(122, 172, 255, 0.8);
      font-size: 11px;
      cursor: pointer;
      color: #dbe4ff;
      box-shadow: 0 0 10px rgba(31, 89, 255, 0.6);
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out,
        border-color 0.12s ease-out, background 0.12s ease-out;
    }

    .dock-icon:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 14px rgba(77, 223, 255, 0.9);
      border-color: rgba(209, 237, 255, 0.9);
    }

    .dock-icon.active {
      background: linear-gradient(120deg, #4ddfff, #7b5dff);
      color: #02061a;
      border-color: transparent;
    }

    .dock-icon-img {
      width: 18px;
      height: 18px;
      border-radius: 5px;
      background: #000814;
      object-fit: cover;
    }

    .dock-label {
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .dock-row-right {
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .dock-row-right span strong {
      color: var(--accent-3);
    }

    /* MAIN WORKSPACE */

    main {
      flex: 1;
      padding: 0 18px 18px;
      display: flex;
      justify-content: center;
      align-items: stretch;
      overflow: hidden;
    }

    .workspace {
      max-width: 1360px;
      width: 100%;
      border-radius: 16px;
      border: 1px solid rgba(86, 134, 255, 0.9);
      background:
        radial-gradient(circle at 0% 0%, rgba(77, 223, 255, 0.18), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(255, 90, 158, 0.18), transparent 60%),
        linear-gradient(135deg, #030719, #050b26);
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    /* DAW WINDOWS (Timeline, Mixer, Patterns...) */

    .daw-window {
      position: absolute;
      background: linear-gradient(145deg, var(--panel-soft), var(--panel-alt));
      border-radius: var(--radius-xl);
      border: 1px solid var(--border-soft);
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.9);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      min-width: 280px;
      min-height: 180px;
      resize: none; /* we'll handle resizing manually */
    }

    .daw-window.hidden {
      display: none;
    }

    .daw-window-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 10px;
      background: linear-gradient(
        to right,
        rgba(18, 45, 120, 0.9),
        rgba(20, 74, 164, 0.96)
      );
      color: #e7eeff;
      cursor: move;
      user-select: none;
    }

    .daw-window-left {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .daw-window-icon {
      width: 18px;
      height: 18px;
      border-radius: 5px;
      background: #000814;
      object-fit: cover;
    }

    .daw-window-title {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    .daw-window-controls {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .win-btn {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid rgba(220, 233, 255, 0.8);
      background: rgba(0, 10, 40, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      cursor: pointer;
      color: #e7eeff;
    }

    .win-btn.close {
      background: radial-gradient(circle, #ff5a9e, #bf165c);
      border-color: rgba(255, 193, 220, 0.9);
      color: #05040c;
    }

    .daw-window-body {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      background: linear-gradient(135deg, var(--panel), #02061a);
    }

    .resize-handle {
      position: absolute;
      width: 16px;
      height: 16px;
      right: 3px;
      bottom: 3px;
      cursor: se-resize;
      background: linear-gradient(135deg, #4ddfff, transparent);
      opacity: 0.9;
      border-radius: 4px;
    }

    /* TIMELINE WINDOW CONTENT */

    .timeline-shell {
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;
    }

    .timeline-topbar {
      padding: 6px 8px;
      border-bottom: 1px solid rgba(119, 167, 255, 0.4);
      background: linear-gradient(135deg, #071133, #0b163f);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      flex-wrap: wrap;
      font-size: 11px;
      color: var(--text-muted);
    }

    .transport-group {
      display: flex;
      align-items: center;
      gap: 4px;
      flex-wrap: wrap;
    }

    .t-btn {
      width: 24px;
      height: 24px;
      border-radius: 999px;
      border: 1px solid rgba(151, 187, 255, 0.8);
      background: radial-gradient(circle at top, #23347a, #030719);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #e7eeff;
      font-size: 14px;
      cursor: pointer;
    }

    .t-btn.primary {
      background: radial-gradient(circle at top, #4ddfff, #081221);
      color: #02061a;
      box-shadow: 0 0 14px rgba(77, 223, 255, 0.9);
    }

    .t-btn.metronome-on {
      background: radial-gradient(circle at top, #ffcc4d, #361800);
      color: #1b1000;
      box-shadow: 0 0 14px rgba(255, 204, 77, 0.9);
    }

    .tempo-field {
      border-radius: 8px;
      border: 1px solid rgba(139, 180, 255, 0.9);
      background: rgba(2, 6, 26, 0.96);
      color: var(--text-main);
      padding: 3px 6px;
      font-size: 11px;
      width: 42px;
      text-align: center;
    }

    .timeline-toolbar {
      padding: 5px 8px;
      border-bottom: 1px solid rgba(89, 140, 255, 0.6);
      background: linear-gradient(90deg, #050a24, #09123a);
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: #d1ddff;
    }

    .tool-btn {
      padding: 4px 7px;
      border-radius: 999px;
      border: 1px solid rgba(122, 172, 255, 0.9);
      background: radial-gradient(circle at top, #102050, #050b26);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 11px;
    }

    .tool-btn.active {
      background: linear-gradient(120deg, #4ddfff, #7b5dff);
      color: #02061a;
      border-color: transparent;
    }

    .tool-icon-small {
      font-size: 13px;
    }

    .timeline-main {
      flex: 1;
      display: grid;
      grid-template-columns: 220px minmax(0, 1fr);
      overflow: hidden;
    }

    .timeline-browser {
      border-right: 1px solid rgba(89, 140, 255, 0.6);
      background: linear-gradient(135deg, #050b26, #08133a);
      padding: 6px 7px;
      font-size: 11px;
      color: var(--text-muted);
      overflow-y: auto;
    }

    .browser-section-title {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #99b0ff;
      margin-top: 6px;
      margin-bottom: 3px;
    }

    .browser-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .browser-item {
      border-radius: 8px;
      padding: 4px 6px;
      background: radial-gradient(circle at top, #0d1a4a, #02061a);
      border: 1px solid rgba(119, 167, 255, 0.7);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      cursor: pointer;
      color: #dbe4ff;
    }

    .browser-item:hover {
      box-shadow: 0 0 10px rgba(76, 128, 255, 0.8);
    }

    .timeline-ruler {
      border-bottom: 1px solid rgba(89, 140, 255, 0.6);
      background: linear-gradient(90deg, #04081c, #081336);
      display: grid;
      grid-template-columns: 110px minmax(0, 1fr);
      font-size: 10px;
      color: #9fb4ff;
    }

    .timeline-ruler-left {
      padding: 4px 6px;
      border-right: 1px solid rgba(89, 140, 255, 0.6);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .timeline-ruler-right {
      padding: 4px 6px;
      overflow-x: auto;
      position: relative;
      background-image: linear-gradient(
        to right,
        rgba(151, 187, 255, 0.36) 1px,
        transparent 1px
      );
      background-size: 70px 1px;
      display: flex;
      gap: 70px;
      scrollbar-width: thin;
    }

    .timeline-playhead {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, #4ddfff, #ff5a9e);
      box-shadow: 0 0 10px rgba(77, 223, 255, 0.8);
      left: 70px;
    }

    .timeline-right {
      display: flex;
      flex-direction: column;
      overflow: hidden;
      background: linear-gradient(135deg, #050b26, #030719);
    }

    .track-list {
      flex: 1;
      overflow: auto;
    }

    .track-row {
      display: grid;
      grid-template-columns: 220px minmax(0, 1fr);
      border-bottom: 1px solid rgba(72, 110, 211, 0.7);
      background: radial-gradient(circle at left, #131f54, #030719);
    }

    .track-header {
      border-right: 1px solid rgba(72, 110, 211, 0.7);
      padding: 5px 6px;
      font-size: 11px;
      color: #dbe4ff;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .track-name-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 4px;
    }

    .track-name-main {
      font-weight: 600;
      color: #ffcc4d;
    }

    .track-controls {
      display: flex;
      align-items: center;
      gap: 4px;
      flex-wrap: wrap;
    }

    .pill-small {
      border-radius: 999px;
      padding: 2px 5px;
      border: 1px solid rgba(151, 187, 255, 0.9);
      font-size: 10px;
      background: rgba(6, 10, 31, 0.96);
      color: var(--text-main);
      cursor: pointer;
    }

    .pill-small.mute-on {
      background: rgba(255, 90, 158, 0.16);
      border-color: rgba(255, 90, 158, 0.9);
      color: #ffc9e2;
    }

    .pill-small.solo-on {
      background: rgba(77, 223, 255, 0.16);
      border-color: rgba(77, 223, 255, 0.9);
      color: #e3fbff;
    }

    .pill-small.arm-on {
      background: rgba(255, 89, 114, 0.3);
      border-color: rgba(255, 89, 114, 0.9);
      color: #ffe0ea;
    }

    .vol-row {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 10px;
      color: #b6c5ff;
    }

    .vol-row input[type="range"] {
      flex: 1;
      accent-color: #4ddfff;
    }

    .track-action-select {
      border-radius: 9px;
      border: 1px solid rgba(146, 183, 255, 0.9);
      background: rgba(3, 6, 26, 0.98);
      color: var(--text-main);
      font-size: 10px;
      padding: 2px 5px;
      min-width: 120px;
    }

    .track-lane {
      padding: 5px 6px;
      background-image: linear-gradient(
        to right,
        rgba(104, 145, 255, 0.13) 1px,
        transparent 1px
      );
      background-size: 70px 1px;
      display: flex;
      align-items: center;
      gap: 6px;
      overflow-x: auto;
      scrollbar-width: thin;
    }

    .clip {
      min-width: 120px;
      max-width: 260px;
      border-radius: 9px;
      padding: 4px 7px;
      font-size: 10px;
      background: linear-gradient(135deg, #4ddfff, #7b5dff);
      box-shadow: 0 0 16px rgba(77, 223, 255, 0.9);
      color: #02061a;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      cursor: pointer;
    }

    .clip.stem {
      background: linear-gradient(135deg, #ffcc4d, #ff8f4d);
      box-shadow: 0 0 16px rgba(255, 204, 77, 0.9);
    }

    .clip.midi {
      background: linear-gradient(135deg, #3ee6a9, #4ddfff);
      box-shadow: 0 0 16px rgba(62, 230, 169, 0.9);
    }

    .clip.muted {
      opacity: 0.45;
      box-shadow: none;
    }

    .cell-empty {
      min-width: 140px;
      border-radius: 9px;
      border: 1px dashed rgba(146, 183, 255, 0.9);
      padding: 4px 7px;
      font-size: 10px;
      color: #a7b7ff;
      background: rgba(2, 6, 26, 0.9);
      cursor: pointer;
    }

    .timeline-footer {
      padding: 4px 6px;
      border-top: 1px solid rgba(98, 147, 255, 0.7);
      font-size: 10px;
      color: #9eb4ff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .zoom-slider {
      width: 120px;
      accent-color: #4ddfff;
    }

    .add-track-btn {
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(146, 183, 255, 0.9);
      background: radial-gradient(circle at top, #11245d, #020617);
      font-size: 10px;
      cursor: pointer;
      color: #e3ecff;
    }

    /* MIXER & PATTERNS PLACEHOLDERS */

    .placeholder-body {
      flex: 1;
      padding: 8px 8px 10px;
      font-size: 12px;
      color: var(--text-muted);
      display: flex;
      flex-direction: column;
      gap: 8px;
      overflow: auto;
    }

    .mixer-strips {
      display: flex;
      align-items: flex-end;
      gap: 10px;
      overflow-x: auto;
      padding-bottom: 4px;
    }

    .mixer-strip {
      width: 60px;
      border-radius: 12px;
      background: linear-gradient(135deg, #09153e, #050b26);
      border: 1px solid rgba(130, 175, 255, 0.9);
      padding: 6px 4px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      font-size: 10px;
      color: #dbe4ff;
    }

    .mixer-title {
      font-size: 10px;
      color: #ffcc4d;
    }

    .mixer-meter {
      width: 16px;
      height: 110px;
      border-radius: 999px;
      background: linear-gradient(to top, #1a2147, #0c122d);
      border: 1px solid rgba(146, 183, 255, 0.9);
      position: relative;
      overflow: hidden;
    }

    .mixer-meter-fill {
      position: absolute;
      left: 2px;
      right: 2px;
      bottom: 2px;
      height: 60%;
      border-radius: 999px;
      background: linear-gradient(to top, #3ee6a9, #ffcc4d, #ff5a9e);
      box-shadow: 0 0 10px rgba(62, 230, 169, 0.9);
    }

    .mixer-fader {
      width: 100%;
      margin-top: 2px;
    }

    .mixer-fader input[type="range"] {
      width: 100%;
      accent-color: #7b5dff;
    }

    .patterns-layout {
      display: grid;
      grid-template-columns: 200px minmax(0, 1fr);
      gap: 8px;
      align-items: stretch;
    }

    .patterns-list {
      border-radius: 12px;
      border: 1px solid rgba(136, 178, 255, 0.9);
      background: radial-gradient(circle at top, #101f5c, #02061a);
      padding: 6px 7px;
      font-size: 11px;
      color: #dbe4ff;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .pattern-item {
      border-radius: 7px;
      padding: 4px 6px;
      background: radial-gradient(circle at left, #2837a4, #03071c);
      border: 1px solid rgba(159, 199, 255, 0.9);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 4px;
    }

    .pattern-item span.name {
      font-size: 11px;
    }

    .pattern-grid {
      border-radius: 12px;
      border: 1px solid rgba(136, 178, 255, 0.9);
      background: radial-gradient(circle at top, #0c1a4a, #02061a);
      padding: 6px 7px;
      font-size: 11px;
      color: #dbe4ff;
      overflow: auto;
    }

    .pattern-row {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 4px;
    }

    .pattern-label {
      width: 90px;
      color: #ffcc4d;
    }

    .pattern-cells {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(16, minmax(0, 1fr));
      gap: 2px;
    }

    .pattern-cell {
      height: 12px;
      border-radius: 3px;
      background: rgba(102, 153, 255, 0.25);
      cursor: pointer;
    }

    .pattern-cell.active {
      background: linear-gradient(135deg, #4ddfff, #7b5dff);
      box-shadow: 0 0 8px rgba(77, 223, 255, 0.9);
    }
  </style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="brand-block">
      <div class="brand-icon">S</div>
      <div class="brand-labels">
        <div class="brand-main">Sulandra Creative Studio</div>
        <div class="brand-sub">Sound ¬∑ Royal Blue ¬∑ Multi-Color Texture</div>
      </div>
      <div class="brand-mode">SOUND ¬∑ DAW WORKSPACE</div>
    </div>
    <div class="header-right">
      <div class="session-pill">
        <span>Session: <strong>We Need A Miracle ¬∑ v3</strong></span>
      </div>
      <div class="profile-chip" onclick="alert('Account & billing live in main app ‚Äì SOUND is the DAW workspace.')">
        <div class="profile-avatar">U</div>
        <div>
          <div style="font-size:11px;">Signed in</div>
          <div class="profile-plan">Creator Ultimate</div>
        </div>
      </div>
    </div>
  </div>
</header>

<section class="dock-row">
  <div class="dock-icons">
    <!-- NOTE: replace these src paths with your real icons -->
    <div class="dock-icon active" data-window="timeline">
      <img src="icons/timeline.svg" alt="Timeline" class="dock-icon-img">
      <span class="dock-label">Timeline</span>
    </div>
    <div class="dock-icon" data-window="mixer">
      <img src="icons/mixer.svg" alt="Mixer" class="dock-icon-img">
      <span class="dock-label" style="color:#ffcc4d;">Mixer</span>
    </div>
    <div class="dock-icon" data-window="patterns">
      <img src="icons/patterns.svg" alt="Patterns" class="dock-icon-img">
      <span class="dock-label" style="color:#7bff8d;">Patterns</span>
    </div>
    <div class="dock-icon" data-window="browser">
      <img src="icons/browser.svg" alt="Browser" class="dock-icon-img">
      <span class="dock-label" style="color:#4ddfff;">Browser</span>
    </div>
    <div class="dock-icon" data-window="plugins">
      <img src="icons/plugins.svg" alt="Plugins" class="dock-icon-img">
      <span class="dock-label" style="color:#ff5a9e;">Plugins</span>
    </div>
  </div>
  <div class="dock-row-right">
    <span><strong>Tip:</strong> You can open multiple windows at once (Timeline + Mixer + Patterns) and move/resize them freely.</span>
  </div>
</section>

<main>
  <div class="workspace" id="workspace">
    <!-- TIMELINE WINDOW (keeps the current timeline look) -->
    <div
      class="daw-window"
      id="win-timeline"
      style="left:12px; top:12px; width: calc(100% - 24px); height: calc(100% - 24px);"
      data-window-id="timeline"
    >
      <div class="daw-window-header">
        <div class="daw-window-left">
          <img src="icons/timeline.svg" alt="Timeline" class="daw-window-icon">
          <div class="daw-window-title">Timeline ¬∑ Arrange & Edit</div>
        </div>
        <div class="daw-window-controls">
          <div class="win-btn" data-action="minimize">‚Äì</div>
          <div class="win-btn" data-action="maximize">‚ñ°</div>
          <div class="win-btn close" data-action="close">√ó</div>
        </div>
      </div>
      <div class="daw-window-body">
        <div class="timeline-shell">
          <!-- TRANSPORT ABOVE TIMELINE -->
          <div class="timeline-topbar">
            <div class="transport-group">
              <button class="t-btn" id="btnStart">‚èÆ</button>
              <button class="t-btn primary" id="btnPlay">‚ñ∂</button>
              <button class="t-btn" id="btnStop">‚èπ</button>
              <button class="t-btn" id="btnRecord">‚óè</button>
              <button class="t-btn" id="btnMetronome">‚è∞</button>
            </div>
            <div class="transport-group">
              <span>Tempo</span>
              <input id="tempoInput" class="tempo-field" value="98" /> BPM
              <span>Time</span>
              <span id="timeDisplay">01:24 / 08:00</span>
            </div>
            <div class="transport-group">
              <label style="display:flex;align-items:center;gap:3px;">
                <input type="checkbox" checked /> Follow playhead
              </label>
              <label style="display:flex;align-items:center;gap:3px;">
                <input type="checkbox" /> Loop region
              </label>
            </div>
          </div>

          <!-- EDIT TOOLS -->
          <div class="timeline-toolbar">
            <button class="tool-btn active" data-tool="select">
              <span class="tool-icon-small">üëÜ</span> Select
            </button>
            <button class="tool-btn" data-tool="split">
              <span class="tool-icon-small">‚úÇÔ∏è</span> Split
            </button>
            <button class="tool-btn" data-tool="mute">
              <span class="tool-icon-small">üîá</span> Mute Clip
            </button>
            <button class="tool-btn" data-tool="draw">
              <span class="tool-icon-small">‚úèÔ∏è</span> Draw / Add Clip
            </button>
            <button class="tool-btn" data-tool="stretch">
              <span class="tool-icon-small">‚ÜîÔ∏è</span> Stretch / Snap
            </button>
            <span style="margin-left:auto;font-size:10px;color:#9fb4ff;">
              Right-click clip ‚Üí extra actions (split, mute, send to CINEMA / PHOTOLAB).
            </span>
          </div>

          <div class="timeline-main">
            <!-- LEFT BROWSER (placeholder, can later be its own HTML) -->
            <aside class="timeline-browser">
              <div class="browser-section-title">Project Stems</div>
              <div class="browser-list">
                <div class="browser-item">
                  <span>Drums ‚Äì Stem</span><span style="font-size:10px;">1:24</span>
                </div>
                <div class="browser-item">
                  <span>Bass ‚Äì Stem</span><span style="font-size:10px;">1:24</span>
                </div>
                <div class="browser-item">
                  <span>Guitar / Keys ‚Äì Stem</span><span style="font-size:10px;">1:24</span>
                </div>
                <div class="browser-item">
                  <span>Lead Vocal ‚Äì Stem</span><span style="font-size:10px;">1:24</span>
                </div>
              </div>

              <div class="browser-section-title">Utilities</div>
              <div class="browser-list">
                <div class="browser-item" onclick="alert('Placeholder: split full mix into stems')">
                  <span>Split full mix into stems</span><span style="font-size:10px;">‚á£</span>
                </div>
                <div class="browser-item" onclick="alert('Placeholder: remove vocals / keep instrumental')">
                  <span>Remove vocals / keep instrumental</span><span style="font-size:10px;">‚á£</span>
                </div>
                <div class="browser-item" onclick="alert('Placeholder: convert stem to MIDI')">
                  <span>Convert stem to MIDI</span><span style="font-size:10px;">‚á£</span>
                </div>
              </div>
            </aside>

            <!-- RIGHT: RULER + TRACKS -->
            <section class="timeline-right">
              <div class="timeline-ruler">
                <div class="timeline-ruler-left">
                  <span>Bars</span>
                  <span style="font-size:10px;">Drag in ruler to set loop</span>
                </div>
                <div class="timeline-ruler-right" id="rulerScroll">
                  <div class="timeline-playhead" id="playhead"></div>
                  <span>1</span><span>5</span><span>9</span><span>13</span>
                  <span>17</span><span>21</span><span>25</span><span>29</span>
                </div>
              </div>

              <div class="track-list" id="trackList">
                <!-- FULL MIX -->
                <div class="track-row" id="track-full">
                  <div class="track-header">
                    <div class="track-name-row">
                      <span class="track-name-main">Full Mix</span>
                      <div class="track-controls">
                        <button class="pill-small" onclick="toggleSolo(this)">S</button>
                        <button class="pill-small" onclick="toggleMute(this)">M</button>
                        <button class="pill-small" onclick="toggleArm(this)">‚óè</button>
                      </div>
                    </div>
                    <div class="vol-row">
                      Vol <input type="range" min="0" max="100" value="80">
                    </div>
                    <div class="track-controls">
                      <select class="track-action-select" onchange="handleTrackAction(this, 'Full Mix')">
                        <option value="">Track actions‚Ä¶</option>
                        <option value="record">Record‚Ä¶</option>
                        <option value="upload">Upload audio‚Ä¶</option>
                        <option value="import">Import from Music Lab‚Ä¶</option>
                        <option value="create">Create with AI‚Ä¶</option>
                      </select>
                    </div>
                  </div>
                  <div class="track-lane">
                    <div class="clip stem">Song Mix ‚Äì ‚ÄúWe Need A Miracle v3‚Äù</div>
                    <div class="cell-empty" onclick="alert('Placeholder: extend / remix with AI')">
                      + Extend / Remix with AI
                    </div>
                  </div>
                </div>

                <!-- DRUMS -->
                <div class="track-row" id="track-drums">
                  <div class="track-header">
                    <div class="track-name-row">
                      <span class="track-name-main">Drums</span>
                      <div class="track-controls">
                        <button class="pill-small" onclick="toggleSolo(this)">S</button>
                        <button class="pill-small" onclick="toggleMute(this)">M</button>
                        <button class="pill-small" onclick="toggleArm(this)">‚óè</button>
                      </div>
                    </div>
                    <div class="vol-row">
                      Vol <input type="range" min="0" max="100" value="72">
                    </div>
                    <div class="track-controls">
                      <select class="track-action-select" onchange="handleTrackAction(this, 'Drums')">
                        <option value="">Track actions‚Ä¶</option>
                        <option value="record">Record‚Ä¶</option>
                        <option value="upload">Upload audio‚Ä¶</option>
                        <option value="import">Import from Music Lab‚Ä¶</option>
                        <option value="create">Create with AI‚Ä¶</option>
                      </select>
                    </div>
                  </div>
                  <div class="track-lane">
                    <div class="clip stem">Drum stem ‚Äì 0:00‚Äì1:24</div>
                    <div class="cell-empty" onclick="alert('Placeholder: new kick / fill pattern')">
                      + New kick / fill pattern
                    </div>
                  </div>
                </div>

                <!-- BASS -->
                <div class="track-row" id="track-bass">
                  <div class="track-header">
                    <div class="track-name-row">
                      <span class="track-name-main">Bass</span>
                      <div class="track-controls">
                        <button class="pill-small" onclick="toggleSolo(this)">S</button>
                        <button class="pill-small" onclick="toggleMute(this)">M</button>
                        <button class="pill-small" onclick="toggleArm(this)">‚óè</button>
                      </div>
                    </div>
                    <div class="vol-row">
                      Vol <input type="range" min="0" max="100" value="68">
                    </div>
                    <div class="track-controls">
                      <select class="track-action-select" onchange="handleTrackAction(this, 'Bass')">
                        <option value="">Track actions‚Ä¶</option>
                        <option value="record">Record‚Ä¶</option>
                        <option value="upload">Upload audio‚Ä¶</option>
                        <option value="import">Import from Music Lab‚Ä¶</option>
                        <option value="create">Create with AI‚Ä¶</option>
                      </select>
                    </div>
                  </div>
                  <div class="track-lane">
                    <div class="clip stem">Bass stem ‚Äì 0:00‚Äì1:24</div>
                    <div class="clip midi">MIDI bass ‚Äì bar 9‚Äì17</div>
                    <div class="cell-empty" onclick="alert('Placeholder: extend bass pattern')">
                      + Extend pattern
                    </div>
                  </div>
                </div>

                <!-- LEAD VOCAL -->
                <div class="track-row" id="track-vox">
                  <div class="track-header">
                    <div class="track-name-row">
                      <span class="track-name-main">Lead Vocal</span>
                      <div class="track-controls">
                        <button class="pill-small" onclick="toggleSolo(this)">S</button>
                        <button class="pill-small" onclick="toggleMute(this)">M</button>
                        <button class="pill-small" onclick="toggleArm(this)">‚óè</button>
                      </div>
                    </div>
                    <div class="vol-row">
                      Vol <input type="range" min="0" max="100" value="82">
                    </div>
                    <div class="track-controls">
                      <select class="track-action-select" onchange="handleTrackAction(this, 'Lead Vocal')">
                        <option value="">Track actions‚Ä¶</option>
                        <option value="record">Record‚Ä¶</option>
                        <option value="upload">Upload audio‚Ä¶</option>
                        <option value="import">Import from Music Lab‚Ä¶</option>
                        <option value="create">Create with AI‚Ä¶</option>
                      </select>
                    </div>
                  </div>
                  <div class="track-lane">
                    <div class="clip stem">Lead vocal ‚Äì Verse & Chorus</div>
                    <div class="cell-empty" onclick="alert('Placeholder: harmonies / ad-libs')">
                      + Harmonies / ad-libs
                    </div>
                  </div>
                </div>
              </div>

              <div class="timeline-footer">
                <button class="add-track-btn" id="btnAddTrack">+ Add Track</button>
                <div>
                  Zoom
                  <input type="range" min="20" max="140" value="70" class="zoom-slider">
                </div>
                <span>Space = Play/Pause ¬∑ R = Record ¬∑ Right-click clip = more tools</span>
              </div>
            </section>
          </div>
        </div>
      </div>
      <div class="resize-handle"></div>
    </div>

    <!-- MIXER WINDOW -->
    <div
      class="daw-window hidden"
      id="win-mixer"
      style="left:40px; top:60px; width:420px; height:320px;"
      data-window-id="mixer"
    >
      <div class="daw-window-header">
        <div class="daw-window-left">
          <img src="icons/mixer.svg" alt="Mixer" class="daw-window-icon">
          <div class="daw-window-title">Mixer ¬∑ Levels & FX</div>
        </div>
        <div class="daw-window-controls">
          <div class="win-btn" data-action="minimize">‚Äì</div>
          <div class="win-btn" data-action="maximize">‚ñ°</div>
          <div class="win-btn close" data-action="close">√ó</div>
        </div>
      </div>
      <div class="daw-window-body">
        <div class="placeholder-body">
          <div>Route each track to busses and the master. This window can later load its own mixer.html.</div>
          <div class="mixer-strips">
            <div class="mixer-strip">
              <div class="mixer-title">Master</div>
              <div class="mixer-meter">
                <div class="mixer-meter-fill"></div>
              </div>
              <div class="mixer-fader">
                <input type="range" min="0" max="100" value="80">
              </div>
            </div>
            <div class="mixer-strip">
              <div class="mixer-title">Drums</div>
              <div class="mixer-meter">
                <div class="mixer-meter-fill" style="height:70%;"></div>
              </div>
              <div class="mixer-fader">
                <input type="range" min="0" max="100" value="72">
              </div>
            </div>
            <div class="mixer-strip">
              <div class="mixer-title">Bass</div>
              <div class="mixer-meter">
                <div class="mixer-meter-fill" style="height:65%;"></div>
              </div>
              <div class="mixer-fader">
                <input type="range" min="0" max="100" value="68">
              </div>
            </div>
            <div class="mixer-strip">
              <div class="mixer-title">Guitar</div>
              <div class="mixer-meter">
                <div class="mixer-meter-fill" style="height:55%;"></div>
              </div>
              <div class="mixer-fader">
                <input type="range" min="0" max="100" value="60">
              </div>
            </div>
            <div class="mixer-strip">
              <div class="mixer-title">Vox</div>
              <div class="mixer-meter">
                <div class="mixer-meter-fill" style="height:75%;"></div>
              </div>
              <div class="mixer-fader">
                <input type="range" min="0" max="100" value="82">
              </div>
            </div>
          </div>
          <div style="font-size:10px;color:#9fb4ff;">
            Later: open mixer.html here instead of this placeholder, with full FX slots and plugin GUIs.
          </div>
        </div>
      </div>
      <div class="resize-handle"></div>
    </div>

    <!-- PATTERNS WINDOW -->
    <div
      class="daw-window hidden"
      id="win-patterns"
      style="left:220px; top:90px; width:520px; height:300px;"
      data-window-id="patterns"
    >
      <div class="daw-window-header">
        <div class="daw-window-left">
          <img src="icons/patterns.svg" alt="Patterns" class="daw-window-icon">
          <div class="daw-window-title">Patterns ¬∑ Step & Clip</div>
        </div>
        <div class="daw-window-controls">
          <div class="win-btn" data-action="minimize">‚Äì</div>
          <div class="win-btn" data-action="maximize">‚ñ°</div>
          <div class="win-btn close" data-action="close">√ó</div>
        </div>
      </div>
      <div class="daw-window-body">
        <div class="placeholder-body">
          <div class="patterns-layout">
            <div class="patterns-list">
              <div style="font-size:10px;text-transform:uppercase;letter-spacing:0.12em;color:#99b0ff;margin-bottom:4px;">
                Patterns
              </div>
              <div class="pattern-item">
                <span class="name">Pattern 1 ‚Äì Drums</span>
                <span style="font-size:10px;">Step</span>
              </div>
              <div class="pattern-item">
                <span class="name">Pattern 2 ‚Äì Bass</span>
                <span style="font-size:10px;">Step</span>
              </div>
              <div class="pattern-item">
                <span class="name">Pattern 3 ‚Äì Keys</span>
                <span style="font-size:10px;">Piano</span>
              </div>
              <button class="add-track-btn" onclick="alert('Placeholder: create new pattern')">
                + New Pattern
              </button>
            </div>
            <div class="pattern-grid">
              <div style="margin-bottom:4px;font-size:10px;color:#c6d5ff;">
                Click cells to toggle steps. Later, this can be its own patterns.html with full piano roll / step sequencer.
              </div>
              <div class="pattern-row">
                <div class="pattern-label">Kick</div>
                <div class="pattern-cells">
                  <!-- simple 16-step row -->
                  <div class="pattern-cell active"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell active"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell active"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell active"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                </div>
              </div>
              <div class="pattern-row">
                <div class="pattern-label">Snare</div>
                <div class="pattern-cells">
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell active"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell active"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                </div>
              </div>
              <div class="pattern-row">
                <div class="pattern-label">Log Drum</div>
                <div class="pattern-cells">
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell active"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell active"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell active"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell active"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                  <div class="pattern-cell"></div>
                </div>
              </div>
            </div>
          </div>
          <div style="font-size:10px;color:#9fb4ff;">
            Later: drag patterns into the main timeline grid or swap this window for patterns.html loaded via iframe.
          </div>
        </div>
      </div>
      <div class="resize-handle"></div>
    </div>

    <!-- Simple placeholders for Browser / Plugins windows (empty shells you can expand later) -->
    <div
      class="daw-window hidden"
      id="win-browser"
      style="left:120px; top:140px; width:320px; height:260px;"
      data-window-id="browser"
    >
      <div class="daw-window-header">
        <div class="daw-window-left">
          <img src="icons/browser.svg" alt="Browser" class="daw-window-icon">
          <div class="daw-window-title">Browser ¬∑ Files & Presets</div>
        </div>
        <div class="daw-window-controls">
          <div class="win-btn" data-action="minimize">‚Äì</div>
          <div class="win-btn" data-action="maximize">‚ñ°</div>
          <div class="win-btn close" data-action="close">√ó</div>
        </div>
      </div>
      <div class="daw-window-body">
        <div class="placeholder-body">
          This window can later be replaced by browser.html with full folder tree, search, FL-style preset browsing, etc.
        </div>
      </div>
      <div class="resize-handle"></div>
    </div>

    <div
      class="daw-window hidden"
      id="win-plugins"
      style="left:260px; top:40px; width:360px; height:260px;"
      data-window-id="plugins"
    >
      <div class="daw-window-header">
        <div class="daw-window-left">
          <img src="icons/plugins.svg" alt="Plugins" class="daw-window-icon">
          <div class="daw-window-title">Plugins ¬∑ Instruments & FX</div>
        </div>
        <div class="daw-window-controls">
          <div class="win-btn" data-action="minimize">‚Äì</div>
          <div class="win-btn" data-action="maximize">‚ñ°</div>
          <div class="win-btn close" data-action="close">√ó</div>
        </div>
      </div>
      <div class="daw-window-body">
        <div class="placeholder-body">
          This will later host plugin browsers and plugin GUIs. For now, it‚Äôs a shell so you can style and position it like FL Studio.
        </div>
      </div>
      <div class="resize-handle"></div>
    </div>

  </div>
</main>

<script>
  /* SIMPLE WINDOW MANAGER: drag, resize, z-order, minimize, auto-hide if fully off-screen */

  const workspace = document.getElementById('workspace');
  const dockIcons = document.querySelectorAll('.dock-icon');
  let zCounter = 10;

  function bringToFront(win) {
    zCounter += 1;
    win.style.zIndex = zCounter;
  }

  function showWindowById(id) {
    const win = document.getElementById('win-' + id);
    if (!win) return;
    win.classList.remove('hidden');
    bringToFront(win);
  }

  dockIcons.forEach(icon => {
    icon.addEventListener('click', () => {
      const id = icon.getAttribute('data-window');
      showWindowById(id);
      dockIcons.forEach(i => i.classList.toggle('active', i === icon));
    });
  });

  function initWindow(win) {
    bringToFront(win);
    const header = win.querySelector('.daw-window-header');
    const resizeHandle = win.querySelector('.resize-handle');
    const controls = win.querySelectorAll('.win-btn');
    let dragging = false;
    let resizing = false;
    let startX, startY, startLeft, startTop, startW, startH;
    let maximized = false;
    let prevBounds = null;

    header.addEventListener('mousedown', (e) => {
      if (e.target.classList.contains('win-btn')) return;
      dragging = true;
      bringToFront(win);
      startX = e.clientX;
      startY = e.clientY;
      const rect = win.getBoundingClientRect();
      startLeft = rect.left;
      startTop = rect.top;
      document.addEventListener('mousemove', onDrag);
      document.addEventListener('mouseup', stopDrag);
    });

    function onDrag(e) {
      if (!dragging) return;
      const dx = e.clientX - startX;
      const dy = e.clientY - startY;
      win.style.left = startLeft + dx + 'px';
      win.style.top = startTop + dy + 'px';
    }

    function stopDrag() {
      if (!dragging) return;
      dragging = false;
      document.removeEventListener('mousemove', onDrag);
      document.removeEventListener('mouseup', stopDrag);

      // auto-minimize if completely off-screen
      const rect = win.getBoundingClientRect();
      const vw = window.innerWidth;
      const vh = window.innerHeight;
      if (rect.right < 0 || rect.left > vw || rect.bottom < 0 || rect.top > vh) {
        win.classList.add('hidden');
      }
    }

    resizeHandle.addEventListener('mousedown', (e) => {
      e.stopPropagation();
      resizing = true;
      bringToFront(win);
      const rect = win.getBoundingClientRect();
      startX = e.clientX;
      startY = e.clientY;
      startW = rect.width;
      startH = rect.height;
      document.addEventListener('mousemove', onResize);
      document.addEventListener('mouseup', stopResize);
    });

    function onResize(e) {
      if (!resizing) return;
      const dx = e.clientX - startX;
      const dy = e.clientY - startY;
      const newW = Math.max(280, startW + dx);
      const newH = Math.max(180, startH + dy);
      win.style.width = newW + 'px';
      win.style.height = newH + 'px';
    }

    function stopResize() {
      if (!resizing) return;
      resizing = false;
      document.removeEventListener('mousemove', onResize);
      document.removeEventListener('mouseup', stopResize);
    }

    controls.forEach(btn => {
      const action = btn.getAttribute('data-action');
      btn.addEventListener('click', () => {
        if (action === 'close' || action === 'minimize') {
          win.classList.add('hidden'); // treat close as minimize
        } else if (action === 'maximize') {
          if (!maximized) {
            const rect = win.getBoundingClientRect();
            prevBounds = {
              left: rect.left,
              top: rect.top,
              width: rect.width,
              height: rect.height
            };
            win.style.left = '8px';
            win.style.top = '8px';
            win.style.width = 'calc(100% - 16px)';
            win.style.height = 'calc(100% - 16px)';
            maximized = true;
          } else if (prevBounds) {
            win.style.left = prevBounds.left + 'px';
            win.style.top = prevBounds.top + 'px';
            win.style.width = prevBounds.width + 'px';
            win.style.height = prevBounds.height + 'px';
            maximized = false;
          }
        }
      });
    });

    header.addEventListener('dblclick', () => {
      const maxBtn = win.querySelector('.win-btn[data-action="maximize"]');
      if (maxBtn) maxBtn.click();
    });
  }

  document.querySelectorAll('.daw-window').forEach(initWindow);

  /* SIMPLE TRANSPORT STUB */

  let isPlaying = false;
  let metronomeOn = false;

  const btnPlay = document.getElementById('btnPlay');
  const btnStop = document.getElementById('btnStop');
  const btnStart = document.getElementById('btnStart');
  const btnRecord = document.getElementById('btnRecord');
  const btnMetronome = document.getElementById('btnMetronome');

  function updatePlayUI() {
    if (isPlaying) {
      btnPlay.classList.add('primary');
      btnPlay.textContent = '‚è∏';
    } else {
      btnPlay.textContent = '‚ñ∂';
    }
  }

  btnPlay.addEventListener('click', () => {
    isPlaying = !isPlaying;
    updatePlayUI();
  });

  btnStop.addEventListener('click', () => {
    isPlaying = false;
    updatePlayUI();
  });

  btnStart.addEventListener('click', () => {
    isPlaying = false;
    updatePlayUI();
  });

  btnRecord.addEventListener('click', () => {
    alert('Record is UI-only for now. Later this will record to armed tracks and drop takes into the timeline.');
  });

  btnMetronome.addEventListener('click', () => {
    metronomeOn = !metronomeOn;
    btnMetronome.classList.toggle('metronome-on', metronomeOn);
  });

  document.addEventListener('keydown', (e) => {
    const tag = (e.target.tagName || '').toLowerCase();
    if (tag === 'input' || tag === 'textarea' || e.target.isContentEditable) return;
    if (e.code === 'Space') {
      e.preventDefault();
      btnPlay.click();
    } else if (e.key === 'r' || e.key === 'R') {
      btnRecord.click();
    }
  });

  /* TRACK BUTTON STATES */

  function toggleMute(btn) {
    btn.classList.toggle('mute-on');
  }

  function toggleSolo(btn) {
    btn.classList.toggle('solo-on');
  }

  function toggleArm(btn) {
    btn.classList.toggle('arm-on');
  }

  /* TRACK ACTIONS PLACEHOLDER */

  function handleTrackAction(selectEl, trackName) {
    const value = selectEl.value;
    if (!value) return;
    if (value === 'record') {
      alert('Record to "' + trackName + '" ‚Äì later this opens a detailed record modal.');
    } else if (value === 'upload') {
      alert('Upload audio to "' + trackName + '" ‚Äì later this opens file picker and snaps to tempo.');
    } else if (value === 'import') {
      alert('Import from Labs to "' + trackName + '" ‚Äì later this opens a browser for Music/Video/Film Lab content.');
    } else if (value === 'create') {
      alert('Create with AI for "' + trackName + '" ‚Äì later this opens your AI generate panel.');
    }
    selectEl.value = '';
  }

  /* ADD TRACK BUTTON (simple clone template) */

  const btnAddTrack = document.getElementById('btnAddTrack');
  const trackList = document.getElementById('trackList');

  btnAddTrack.addEventListener('click', () => {
    const template = document.getElementById('track-drums');
    if (!template) return;
    const clone = template.cloneNode(true);
    const count = trackList.querySelectorAll('.track-row').length;
    clone.id = 'track-new-' + count;
    const nameSpan = clone.querySelector('.track-name-main');
    if (nameSpan) nameSpan.textContent = 'New Track ' + count;
    const select = clone.querySelector('.track-action-select');
    if (select) {
      select.addEventListener('change', function () {
        handleTrackAction(this, nameSpan ? nameSpan.textContent : 'New Track');
      });
    }
    const btns = clone.querySelectorAll('.pill-small');
    if (btns[0]) btns[0].onclick = function () { toggleSolo(this); };
    if (btns[1]) btns[1].onclick = function () { toggleMute(this); };
    if (btns[2]) btns[2].onclick = function () { toggleArm(this); };
    trackList.appendChild(clone);
  });

  /* PATTERN CELLS SIMPLE TOGGLE */

  document.querySelectorAll('.pattern-cell').forEach(cell => {
    cell.addEventListener('click', () => {
      cell.classList.toggle('active');
    });
  });
</script>
</body>
</html>
