<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sulandra AI Studio – Video Lab</title>

  <style>
    :root {
      --bg: #050816;
      --card-bg: #0b1020;
      --accent: #a855f7;
      --accent-soft: rgba(168, 85, 247, 0.18);
      --accent2: #3b82f6;
      --accent3: #f97316;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --border-soft: rgba(148, 163, 184, 0.25);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background:
        radial-gradient(circle at top, #111827, #020617 55%),
        radial-gradient(circle at bottom, #020617, #000 80%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* HEADER */

    header {
      border-bottom: 1px solid var(--border-soft);
      background: rgba(2, 6, 23, 0.95);
      backdrop-filter: blur(12px);
      position: sticky;
      top: 0;
      z-index: 30;
    }

    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 14px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      flex-wrap: wrap;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-circle {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: conic-gradient(
        from 140deg,
        #a855f7,
        #3b82f6,
        #f97316,
        #22c55e,
        #a855f7
      );
      box-shadow: 0 0 18px rgba(168, 85, 247, 0.6);
      animation: spinGlow 8s linear infinite;
    }

    .logo-text-main {
      font-weight: 700;
      font-size: 17px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .logo-text-sub {
      font-size: 10px;
      text-transform: uppercase;
      color: var(--text-muted);
      letter-spacing: 0.14em;
      animation: glowPulse 3.5s ease-in-out infinite;
    }

    .nav-group {
      display: flex;
      align-items: center;
      gap: 14px;
      flex-wrap: wrap;
    }

    nav {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    nav a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 14px;
      padding: 6px 9px;
      border-radius: 999px;
      border: 1px solid transparent;
      transition: all 0.18s ease;
    }

    nav a:hover {
      color: var(--text-main);
      border-color: var(--border-soft);
      background: rgba(15, 23, 42, 0.8);
    }

    nav a.active {
      color: var(--text-main);
      background: var(--accent-soft);
      border-color: rgba(168, 85, 247, 0.7);
      box-shadow: 0 0 12px rgba(168, 85, 247, 0.5);
    }

    .profile-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border-radius: 999px;
      padding: 6px 10px;
      border: 1px solid var(--border-soft);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), #020617);
      font-size: 12px;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.16s ease;
    }

    .profile-avatar {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: linear-gradient(135deg, #a855f7, #3b82f6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 700;
      color: #f9fafb;
    }

    .profile-badge:hover {
      border-color: rgba(168, 85, 247, 0.7);
      color: var(--text-main);
      box-shadow: 0 0 16px rgba(168, 85, 247, 0.5);
    }

    .profile-credits {
      font-size: 11px;
      color: var(--text-muted);
    }

    main {
      flex: 1;
    }

    /* HERO */

    .lab-hero {
      max-width: 1200px;
      margin: 16px auto 0;
      padding: 0 16px 10px;
      border-bottom: 1px solid rgba(15, 23, 42, 0.9);
    }

    .lab-kicker {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .lab-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .lab-title span {
      background: linear-gradient(
        90deg,
        #a855f7,
        #3b82f6,
        #f97316,
        #22c55e,
        #a855f7
      );
      -webkit-background-clip: text;
      color: transparent;
      background-size: 220% 220%;
      animation: shimmer 6s linear infinite;
      text-shadow: 0 0 14px rgba(168, 85, 247, 0.4);
    }

    .lab-sub {
      font-size: 13px;
      color: var(--text-muted);
      max-width: 860px;
      line-height: 1.7;
    }

    .lab-status-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-top: 8px;
      font-size: 11px;
    }

    .lab-pill {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 4px 9px;
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .lab-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.7);
    }

    /* LAYOUT */

    .lab-layout {
      max-width: 1200px;
      margin: 8px auto 0;
      padding: 0 16px 18px;
      display: grid;
      grid-template-columns: 210px minmax(0, 1fr);
      gap: 14px;
    }

    /* SIDEBAR */

    .lab-sidebar {
      border-radius: 16px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.98);
      box-shadow: 0 16px 36px rgba(15, 23, 42, 0.95);
      padding: 10px 8px;
      font-size: 13px;
    }

    .sidebar-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .menu-icon {
      width: 18px;
      height: 18px;
      border-radius: 4px;
      border: 1px solid var(--border-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: var(--text-muted);
    }

    .sidebar-title {
      font-size: 13px;
      font-weight: 600;
    }

    .sidebar-section-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin: 8px 0 4px;
    }

    .sidebar-btn {
      width: 100%;
      text-align: left;
      border-radius: 9px;
      border: 1px solid transparent;
      background: transparent;
      color: var(--text-muted);
      padding: 6px 7px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.15s ease;
      margin-bottom: 3px;
    }

    .sidebar-btn span {
      pointer-events: none;
    }

    .sidebar-btn:hover {
      background: rgba(15, 23, 42, 0.98);
      border-color: var(--border-soft);
      color: var(--text-main);
    }

    .sidebar-btn.active {
      background: radial-gradient(circle at top left, #111827, #020617);
      border-color: rgba(168, 85, 247, 0.7);
      color: var(--text-main);
      box-shadow: 0 0 16px rgba(168, 85, 247, 0.4);
    }

    .sidebar-badge {
      font-size: 10px;
      border-radius: 999px;
      padding: 2px 6px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: var(--text-muted);
    }

    .sidebar-plan-dots {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 8px;
      line-height: 1.4;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      font-size: 11px;
      color: var(--text-muted);
      background: rgba(15, 23, 42, 0.96);
      margin-right: 4px;
      margin-bottom: 4px;
      cursor: pointer;
    }

    /* MAIN PANEL */

    .lab-main {
      border-radius: 18px;
      border: 1px solid var(--border-soft);
      background: radial-gradient(circle at top, #111827, #020617);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.95);
      padding: 12px 12px 14px;
      min-height: 320px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .lab-main-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .lab-main-title {
      font-size: 15px;
      font-weight: 600;
    }

    .lab-main-sub {
      font-size: 11px;
      color: var(--text-muted);
    }

    .lab-main-plan-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 4px 9px;
      font-size: 11px;
      background: rgba(15, 23, 42, 0.97);
      color: var(--text-muted);
    }

    .lab-main-columns {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.1fr);
      gap: 10px;
      align-items: start;
    }

    /* INPUT CARDS */

    .input-card {
      border-radius: 12px;
      border: 1px solid var(--border-soft);
      background: rgba(2, 6, 23, 0.98);
      padding: 8px 9px;
      font-size: 12px;
    }

    .input-label-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 5px;
      gap: 10px;
    }

    .input-label {
      font-size: 12px;
      font-weight: 500;
    }

    .input-help {
      font-size: 11px;
      color: var(--text-muted);
    }

    .select-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 6px;
    }

    select {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: #020617;
      color: var(--text-main);
      font-size: 12px;
      padding: 5px 8px;
    }

    .upload-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
    }

    .upload-box {
      border-radius: 11px;
      border: 1px dashed rgba(148, 163, 184, 0.7);
      background: radial-gradient(circle at top, #020617, #020617);
      padding: 12px 9px;
      font-size: 11px;
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 6px;
      align-items: flex-start;
      position: relative;
      overflow: hidden;
    }

    .upload-box .plus-circle {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.85);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.96);
    }

    .upload-box strong {
      font-size: 11px;
      color: #e5e7eb;
    }

    .upload-note {
      font-size: 10px;
      color: var(--text-muted);
    }

    textarea {
      width: 100%;
      border-radius: 9px;
      border: 1px solid var(--border-soft);
      background: #020617;
      color: var(--text-main);
      padding: 7px 8px;
      font-size: 12px;
      min-height: 80px;
      resize: vertical;
    }

    textarea::placeholder {
      color: #6b7280;
    }

    .input-footer-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-muted);
      gap: 10px;
      flex-wrap: wrap;
    }

    .toggle-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-top: 6px;
      font-size: 11px;
    }

    label.toggle {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
    }

    input[type="checkbox"] {
      width: 12px;
      height: 12px;
    }

    .radio-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 4px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .radio-row label {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
    }

    input[type="radio"] {
      width: 11px;
      height: 11px;
    }

    .btn-primary {
      border-radius: 999px;
      padding: 7px 14px;
      font-size: 12px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, #a855f7, #3b82f6);
      color: #f9fafb;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 10px 22px rgba(129, 140, 248, 0.7);
      transition: transform 0.12s ease, box-shadow 0.12s ease;
    }

    .btn-primary span.plus {
      width: 17px;
      height: 17px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 30px rgba(129, 140, 248, 0.9);
    }

    .btn-ghost {
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 11px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text-muted);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.14s ease;
    }

    .btn-ghost:hover {
      border-color: rgba(148, 163, 184, 0.8);
      color: var(--text-main);
      background: rgba(15, 23, 42, 1);
    }

    .btn-icon {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.96);
      width: 32px;
      height: 32px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 15px;
      color: var(--text-muted);
    }

    input[type="text"] {
      width: 100%;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: #020617;
      color: var(--text-main);
      padding: 6px 9px;
      font-size: 12px;
    }

    input[type="text"]::placeholder {
      color: #6b7280;
    }

    /* OUTPUT */

    .output-card {
      border-radius: 12px;
      border: 1px solid var(--border-soft);
      background: rgba(2, 6, 23, 0.98);
      padding: 8px 9px;
      font-size: 12px;
    }

    .output-header-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 10px;
      margin-bottom: 6px;
    }

    .video-preview {
      border-radius: 10px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: radial-gradient(circle at top, #020617, #020617);
      padding: 6px;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .video-frame {
      border-radius: 8px;
      background: radial-gradient(circle at top left, #4c1d95, #020617);
      height: 120px;
      position: relative;
      overflow: hidden;
    }

    .video-frame::after {
      content: "";
      position: absolute;
      inset: 10%;
      border-radius: 12px;
      border: 1px solid rgba(248, 250, 252, 0.08);
      box-shadow:
        0 0 24px rgba(168, 85, 247, 0.5),
        0 0 40px rgba(59, 130, 246, 0.5);
      opacity: 0.7;
    }

    .timeline-row {
      display: flex;
      gap: 5px;
      font-size: 10px;
      color: var(--text-muted);
      align-items: center;
    }

    .timeline-bar {
      flex: 1;
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(90deg, #22c55e, #a855f7, #3b82f6);
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.9);
    }

    .video-meta {
      font-size: 10px;
      color: var(--text-muted);
    }

    .video-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 3px;
    }

    .video-btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: rgba(15, 23, 42, 0.96);
      font-size: 10px;
      padding: 3px 7px;
      cursor: pointer;
      color: var(--text-muted);
    }

    .video-btn.primary {
      border-color: rgba(168, 85, 247, 0.8);
      color: #e5e7eb;
    }

    /* SECONDARY VIEWS */

    .lab-secondary {
      border-radius: 12px;
      border: 1px solid var(--border-soft);
      background: rgba(2, 6, 23, 0.98);
      padding: 9px 10px;
      font-size: 12px;
      display: none;
      flex-direction: column;
      gap: 8px;
      min-height: 240px;
    }

    .lab-secondary.active {
      display: flex;
    }

    .media-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 8px;
    }

    .media-card {
      border-radius: 10px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: radial-gradient(circle at top, #020617, #020617);
      padding: 6px;
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .media-thumb {
      border-radius: 6px;
      background: radial-gradient(circle at top left, #a855f7, #020617);
      height: 60px;
      position: relative;
      overflow: hidden;
    }

    .media-meta-row {
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      color: var(--text-muted);
    }

    /* PROFILE OVERLAY (same as film) */

    .profile-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(10px);
      display: none;
      z-index: 40;
      align-items: stretch;
      justify-content: flex-end;
    }

    .profile-overlay.show {
      display: flex;
    }

    .profile-panel {
      width: min(380px, 100%);
      background: #020617;
      border-left: 1px solid var(--border-soft);
      box-shadow: -20px 0 40px rgba(0, 0, 0, 0.8);
      display: flex;
      flex-direction: column;
    }

    .profile-header {
      padding: 12px 14px;
      border-bottom: 1px solid var(--border-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .profile-header-main {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .profile-avatar-lg {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: linear-gradient(135deg, #a855f7, #3b82f6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
      color: #f9fafb;
    }

    .profile-header-text-main {
      font-size: 14px;
      font-weight: 600;
    }

    .profile-header-text-sub {
      font-size: 11px;
      color: var(--text-muted);
    }

    .close-btn {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-muted);
      cursor: pointer;
      font-size: 13px;
      padding: 6px 9px;
    }

    .profile-body {
      display: grid;
      grid-template-columns: 115px minmax(0, 1fr);
      flex: 1;
      min-height: 0;
    }

    .profile-menu {
      border-right: 1px solid var(--border-soft);
      padding: 10px 8px;
      font-size: 12px;
    }

    .profile-menu button {
      width: 100%;
      text-align: left;
      border-radius: 9px;
      border: 1px solid transparent;
      background: transparent;
      color: var(--text-muted);
      padding: 6px 7px;
      cursor: pointer;
      margin-bottom: 4px;
      font-size: 12px;
      transition: all 0.15s ease;
    }

    .profile-menu button.active {
      background: rgba(15, 23, 42, 0.96);
      border-color: rgba(148, 163, 184, 0.7);
      color: var(--text-main);
    }

    .profile-content {
      padding: 10px 11px;
      overflow-y: auto;
      font-size: 13px;
    }

    .profile-section-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .profile-section-sub {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .profile-line {
      font-size: 13px;
      margin-bottom: 4px;
    }

    .profile-small {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .profile-footer {
      padding: 8px 12px;
      border-top: 1px solid var(--border-soft);
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
    }

    .profile-footer button {
      border-radius: 999px;
      border: 1px solid rgba(248, 113, 113, 0.7);
      background: rgba(15, 23, 42, 0.96);
      color: #fecaca;
      cursor: pointer;
      font-size: 11px;
      padding: 5px 9px;
    }

    /* PLAN OVERLAY */

    .plan-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.92);
      backdrop-filter: blur(10px);
      display: none;
      z-index: 35;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .plan-overlay.show {
      display: flex;
    }

    .plan-dialog {
      width: min(520px, 100%);
      border-radius: 20px;
      background: #020617;
      border: 1px solid var(--border-soft);
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.9);
      padding: 16px 18px 14px;
    }

    .plan-dialog-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 10px;
      gap: 8px;
    }

    .plan-dialog-title {
      font-size: 18px;
      font-weight: 600;
    }

    .plan-dialog-sub {
      font-size: 12px;
      color: var(--text-muted);
    }

    .toggle-pill {
      display: inline-flex;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: rgba(15, 23, 42, 0.98);
      overflow: hidden;
      font-size: 12px;
    }

    .toggle-pill button {
      border: none;
      background: transparent;
      padding: 6px 10px;
      color: var(--text-muted);
      cursor: pointer;
    }

    .toggle-pill button.active {
      background: linear-gradient(135deg, #a855f7, #3b82f6);
      color: #f9fafb;
    }

    .plan-dialog-body {
      font-size: 13px;
      color: var(--text-muted);
    }

    .price-row {
      display: flex;
      align-items: baseline;
      gap: 10px;
      margin-bottom: 4px;
    }

    .price-main {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-main);
    }

    .price-note {
      font-size: 12px;
      color: var(--text-muted);
    }

    .price-strike {
      text-decoration: line-through;
      color: #6b7280;
      font-size: 12px;
    }

    .price-save {
      font-size: 12px;
      color: #22c55e;
    }

    .plan-dialog-footer {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    footer {
      border-top: 1px solid var(--border-soft);
      padding: 10px 16px 14px;
      font-size: 11px;
      color: var(--text-muted);
      text-align: center;
      background: rgba(2, 6, 23, 0.97);
      margin-top: 14px;
    }

    /* ANIMATIONS & RESPONSIVE */

    @keyframes spinGlow {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes glowPulse {
      0%, 100% { opacity: 0.7; text-shadow: 0 0 6px rgba(244, 114, 182, 0.3); }
      50% { opacity: 1; text-shadow: 0 0 16px rgba(244, 114, 182, 0.7); }
    }

    @keyframes shimmer {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }

    @media (max-width: 960px) {
      .lab-layout {
        grid-template-columns: minmax(0, 1fr);
      }
      .lab-main-columns {
        grid-template-columns: minmax(0, 1fr);
      }
      .profile-body {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 640px) {
      .header-inner {
        flex-direction: column;
        align-items: flex-start;
      }
      .lab-title {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="logo">
      <div class="logo-circle"></div>
      <div>
        <div class="logo-text-main">Sulandra AI Studio</div>
        <div class="logo-text-sub">Images · Music · Video · Films</div>
      </div>
    </div>

    <div class="nav-group">
      <nav>
        <a href="index.html">Home</a>
        <a href="image.html">Image</a>
        <a href="video.html" class="active">Video</a>
        <a href="music.html">Music</a>
        <a href="film.html">Short Films</a>
        <a href="studio.html">Studio</a>
        <a href="education.html">Explore</a>
      </nav>

      <button type="button" class="profile-badge" onclick="toggleProfile()">
        <div class="profile-avatar" id="profile-avatar">G</div>
        <div>
          <div id="profile-label">Sign in</div>
          <div class="profile-credits" id="profile-credits">0 credits</div>
        </div>
      </button>
    </div>
  </div>
</header>

<main>
  <!-- HERO -->
  <section class="lab-hero">
    <div class="lab-kicker">Video lab</div>
    <h1 class="lab-title">
      Turn <span>prompts, images & clips</span> into styled AI videos.
    </h1>
    <p class="lab-sub">
      Generate dance videos, music visuals, trailers and loops from text, images, scripts or source clips. Choose a style
      (Afrobeats, Pop, Reggae, R&amp;B, Amapiano and more) or paste a YouTube link under 4 minutes so Sulandra learns the rhythm,
      lighting and camera movement and matches that vibe.
    </p>
    <div class="lab-status-row">
      <div class="lab-pill">
        <div class="lab-dot"></div>
        Live demo · video generation & style learning are simulated here.
      </div>
      <div class="lab-pill" id="lab-plan-pill">
        Plan: Basic · 0 / 0 credits
      </div>
    </div>
  </section>

  <!-- LAYOUT -->
  <section class="lab-layout">
    <!-- SIDEBAR -->
    <aside class="lab-sidebar">
      <div class="sidebar-header">
        <div class="menu-icon">≡</div>
        <div class="sidebar-title">Video tools</div>
      </div>

      <div class="sidebar-section-label">Create</div>
      <button class="sidebar-btn active" id="btn-create-text" onclick="setView('create'); setCreateMode('text');">
        <span>Text → Video</span>
        <span class="sidebar-badge">10 credits</span>
      </button>
      <button class="sidebar-btn" id="btn-create-images" onclick="setView('create'); setCreateMode('images');">
        <span>Images → Video</span>
        <span class="sidebar-badge">15 credits</span>
      </button>
      <button class="sidebar-btn" id="btn-create-script" onclick="setView('create'); setCreateMode('script');">
        <span>Script → Video</span>
        <span class="sidebar-badge">10 credits</span>
      </button>
      <button class="sidebar-btn" id="btn-create-video" onclick="setView('create'); setCreateMode('video');">
        <span>Video → Video</span>
        <span class="sidebar-badge">10 credits</span>
      </button>

      <div class="sidebar-section-label">Work</div>
      <button class="sidebar-btn" onclick="setView('videos')">
        <span>My videos</span>
        <span class="sidebar-badge">History</span>
      </button>
      <button class="sidebar-btn" onclick="setView('script-assistant')">
        <span>AI script / storyboard</span>
      </button>
      <button class="sidebar-btn" onclick="setView('media')">
        <span>Media · Community Video Feed</span>
      </button>

      <div class="sidebar-section-label">Plan quick switch</div>
      <div style="margin-bottom:4px;">
        <span class="chip" onclick="simulatePlan('basic')">Basic</span>
        <span class="chip" onclick="simulatePlan('pro')">Pro</span>
        <span class="chip" onclick="simulatePlan('creator')">Creator</span>
        <span class="chip" onclick="simulatePlan('creatorUltimate')">Creator Ultimate</span>
      </div>

      <div class="sidebar-plan-dots">
        • 4K exports are for <strong>Creator</strong> and above.<br/>
        • Clean exports (no watermark) & WAV audio are for <strong>Pro</strong> and above.<br/>
        • Basic generates UHD previews with watermark to help users fall in love with the quality.
      </div>
    </aside>

    <!-- MAIN PANEL -->
    <section class="lab-main">
      <div class="lab-main-header">
        <div>
          <div class="lab-main-title" id="lab-main-title">Create · Text → Video</div>
          <div class="lab-main-sub" id="lab-main-sub">
            Describe the scene, pick your style or paste a YouTube reference (under 4 minutes) and Sulandra will create a short video.
          </div>
        </div>
        <div class="lab-main-plan-pill" id="lab-main-plan-pill">
          Plan: Basic · 0 / 0 credits
        </div>
      </div>

      <!-- CREATE VIEW -->
      <div id="view-create" class="lab-main-columns">
        <!-- LEFT: INPUTS -->
        <div>
          <!-- VIDEO SETTINGS -->
          <div class="input-card">
            <div class="input-label-row">
              <div class="input-label">Video settings</div>
              <div class="input-help">
                Keep it between 5 and 60 seconds. You can chain multiple clips in Studio later.
              </div>
            </div>

            <div class="select-row">
              <div>
                <div class="input-help" style="margin-bottom:2px;">Aspect</div>
                <select id="aspect">
                  <option value="vertical">Vertical 9:16 (TikTok / Reels)</option>
                  <option value="horizontal">Horizontal 16:9 (YouTube)</option>
                  <option value="square">Square 1:1 (Feeds / Covers)</option>
                </select>
              </div>
              <div>
                <div class="input-help" style="margin-bottom:2px;">Length</div>
                <select id="duration">
                  <option value="7">0:07</option>
                  <option value="15">0:15</option>
                  <option value="30">0:30</option>
                  <option value="60">0:60</option>
                </select>
              </div>
              <div>
                <div class="input-help" style="margin-bottom:2px;">Resolution target</div>
                <select id="resolution">
                  <option value="auto">Auto (by plan)</option>
                  <option value="hd">HD</option>
                  <option value="uhd">UHD</option>
                  <option value="4k">4K (Creator+)</option>
                </select>
              </div>
            </div>

            <div class="select-row">
              <div>
                <div class="input-help" style="margin-bottom:2px;">Audio source</div>
                <select id="audio-source">
                  <option value="none">No audio</option>
                  <option value="upload">Upload audio</option>
                  <option value="music-lab">Use track from Music Lab</option>
                  <option value="auto">Auto-generate backing track</option>
                </select>
              </div>
              <button class="btn-ghost" type="button" onclick="importMusic()">
                Import from Music Lab
              </button>
            </div>

            <div class="toggle-row">
              <label class="toggle">
                <input type="checkbox" id="toggle-lipsync" onchange="updateCreditEstimate()" />
                <span>Lip sync to audio (+10 credits)</span>
              </label>
            </div>
          </div>

          <!-- STYLE & REFERENCE -->
          <div class="input-card" style="margin-top:6px;">
            <div class="input-label-row">
              <div class="input-label">Style & reference</div>
              <div class="input-help">
                Choose a preset style or let Sulandra learn from a short reference clip (≤ 4 minutes).
              </div>
            </div>

            <div class="select-row">
              <div>
                <div class="input-help" style="margin-bottom:2px;">Preset style</div>
                <select id="style-preset">
                  <option value="afrobeats-dance">Afrobeats dance</option>
                  <option value="amapiano-club">Amapiano club</option>
                  <option value="pop-performance">Pop performance</option>
                  <option value="rnb-slow">R&B slow</option>
                  <option value="reggae">Reggae</option>
                  <option value="gospel-live">Gospel live recording</option>
                  <option value="cinematic">Cinematic trailer</option>
                  <option value="documentary">Documentary</option>
                  <option value="sitcom">Sitcom / studio audience</option>
                  <option value="custom">Custom mix</option>
                </select>
              </div>
            </div>

            <div class="radio-row">
              <label>
                <input type="radio" name="style-mode" value="preset" checked onchange="updateStyleMode()" />
                <span>Use preset only</span>
              </label>
              <label>
                <input type="radio" name="style-mode" value="upload" onchange="updateStyleMode()" />
                <span>Upload reference video (≤ 4 min)</span>
              </label>
              <label>
                <input type="radio" name="style-mode" value="youtube" onchange="updateStyleMode()" />
                <span>Provide YouTube URL (≤ 4 min)</span>
              </label>
            </div>

            <div id="style-upload-row" style="margin-top:6px; display:none;">
              <div class="upload-box" onclick="handleStyleUpload()">
                <div class="plus-circle">+</div>
                <strong>Upload style reference video</strong>
                <div class="upload-note">
                  Short clip only. In production we’ll read frame pacing, lighting, camera motion and color grade.
                </div>
              </div>
            </div>

            <div id="style-youtube-row" style="margin-top:6px; display:none;">
              <input type="text" id="style-youtube-url"
                placeholder="Paste a YouTube URL (video must be 4 minutes or less)" />
              <div class="input-help" style="margin-top:4px;">
                In the real app, Sulandra will call the YouTube API to check duration and reject links longer than 4 minutes.
              </div>
            </div>
          </div>

          <!-- INPUTS (PROMPTS / IMAGES / CLIPS) -->
          <div class="input-card" style="margin-top:6px;">
            <div class="input-label-row">
              <div class="input-label" id="inputs-label">Prompt</div>
              <div class="input-help" id="inputs-help">
                Describe what should happen in the video: who, where, movement, camera, mood.
              </div>
            </div>

<div class="upload-grid" id="upload-grid">
  <input type="file" id="real-file-input" style="display: none;" accept="image/*" onchange="fileSelected(this)">

  <div class="upload-box" onclick="handleUpload('images')">
    <div class="plus-circle" id="upload-icon">+</div>
    <strong id="upload-text">Upload images</strong>
    <div class="upload-note">
      Click here to select an image from your computer.
    </div>
  </div>

  <div class="upload-box" onclick="alert('Only Image mode is ready for this test.')">
    <div class="plus-circle">+</div>
    <strong>Upload source video</strong>
    <div class="upload-note">
      For video → video. We’ll enhance, stylize or re-cut based on your prompt.
    </div>
  </div>

  <div class="upload-box" onclick="alert('Only Image mode is ready for this test.')">
    <div class="plus-circle">+</div>
    <strong>Upload audio</strong>
    <div class="upload-note">
      Custom song or beat. Great for Afrobeats dance and choreography.
    </div>
  </div>

  <div class="upload-box" onclick="alert('Only Image mode is ready for this test.')">
    <div class="plus-circle">+</div>
    <strong>Upload script</strong>
    <div class="upload-note">
      For script → video. We’ll extract scenes and convert them into a visual.
    </div>
  </div>
</div>

            <div style="margin-top:6px;">
              <textarea id="prompt-text"
                placeholder="Example: Vertical Afrobeats dance video on a neon rooftop in Lagos at night, 2 dancers trading moves, camera moving smoothly, slow-mo on key beats, matching the YouTube reference style."></textarea>
            </div>

            <div class="input-footer-row">
              <div id="credit-note">
                Base: 10–15 credits (depends on mode). Style reference +10, lip sync +10. Estimated: 10 credits.
              </div>
              <div style="display:flex; gap:6px; flex-wrap:wrap;">
                <button class="btn-ghost" type="button" onclick="openPlanDetails(user.plan)">
                  Change plan
                </button>
                <button class="btn-primary" type="button" onclick="runVideoGeneration()">
                  <span class="plus">+</span>
                  Generate video
                </button>
              </div>
            </div>
          </div>

          <!-- CONNECT WITH OTHER LABS -->
          <div class="input-card" style="margin-top:6px;">
            <div class="input-label-row">
              <div class="input-label">Connect with other labs</div>
              <div class="input-help">
                Use generated images, music and films without downloading or re-uploading.
              </div>
            </div>
            <div class="select-row">
              <button class="btn-ghost" type="button" onclick="importFrom('image')">
                Import images from Image Lab
              </button>
              <button class="btn-ghost" type="button" onclick="importFrom('film')">
                Import scenes from Short Films
              </button>
            </div>
            <div class="select-row">
              <button class="btn-ghost" type="button" onclick="importFrom('music')">
                Import audio from Music Lab
              </button>
              <button class="btn-ghost" type="button" onclick="goToStudio()">
                Send to Studio
              </button>
            </div>
          </div>
        </div>

        <!-- RIGHT: OUTPUT -->
        <div>
          <div class="output-card">
            <div class="output-header-row">
              <div class="input-label">Video preview & controls</div>
              <div class="input-help">
                Preview your clip, then extend, remix, or send directly into Studio for full timeline editing.
              </div>
            </div>

            <div class="video-preview">
              <div class="video-frame"></div>
              <div class="timeline-row">
                <span>0:00</span>
                <div class="timeline-bar"></div>
                <span id="preview-duration-label">0:15</span>
              </div>
              <div class="video-meta" id="video-meta">
                Sample preview · Text → Video · Afrobeats dance · Vertical 9:16 · 0:15
              </div>
              <div class="video-actions">
                <button class="video-btn primary" type="button">Play preview</button>
                <button class="video-btn" type="button" onclick="remixVideo()">
                  Remix with new prompt
                </button>
                <button class="video-btn" type="button" onclick="goToStudio()">
                  Send to Studio (timeline)
                </button>
                <button class="video-btn" type="button" onclick="downloadVideo()">
                  Export / download
                </button>
              </div>
            </div>

            <div class="input-footer-row" style="margin-top:7px;">
              <div>
                In production, 4K export appears for Creator and above. Basic exports remain watermarked to protect your brand.
              </div>
              <button class="btn-ghost" type="button" onclick="setView('videos')">
                View all my videos
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- MY VIDEOS -->
      <div id="view-videos" class="lab-secondary">
        <div class="lab-main-header">
          <div>
            <div class="lab-main-title">My videos</div>
            <div class="lab-main-sub">
              All videos generated on this device (demo). In production this syncs with your Sulandra account and Studio projects.
            </div>
          </div>
        </div>

        <div class="media-grid">
          <div class="media-card">
            <div class="media-thumb"></div>
            <div>Afrobeats rooftop dance · 0:15</div>
            <div class="media-meta-row">
              <span>Text → Video</span>
              <span onclick="goToStudio()" style="cursor:pointer;">Open in Studio →</span>
            </div>
          </div>
          <div class="media-card">
            <div class="media-thumb"></div>
            <div>Gospel live-style loop · 0:30</div>
            <div class="media-meta-row">
              <span>Images → Video</span>
              <span>Remix →</span>
            </div>
          </div>
          <div class="media-card">
            <div class="media-thumb"></div>
            <div>Cinematic trailer snippet · 0:07</div>
            <div class="media-meta-row">
              <span>Script → Video</span>
              <span>Extend →</span>
            </div>
          </div>
        </div>

        <div class="profile-small">
          Later, clicking any video will open controls to change style, swap the beat, or regenerate specific moments directly from the timeline.
        </div>
      </div>

      <!-- SCRIPT / STORYBOARD ASSISTANT -->
      <div id="view-script-assistant" class="lab-secondary">
        <div class="lab-main-header">
          <div>
            <div class="lab-main-title">AI script / storyboard assistant</div>
            <div class="lab-main-sub">
              Describe your concept and we’ll suggest a short structure for 7–60 second videos: beats, camera moves and transitions.
            </div>
          </div>
        </div>

        <div class="input-card">
          <div class="input-label-row">
            <div class="input-label">Idea</div>
          </div>
          <textarea id="script-assistant-input"
            placeholder="Example: Afrobeats rooftop dance challenge, 2 dancers, camera orbits them, slow-motion on the last spin, neon skyline in the background."></textarea>
          <div class="input-footer-row">
            <div>Storyboard suggestions are free. Only generation uses credits.</div>
            <button class="btn-primary" type="button" onclick="suggestStoryboard()">
              <span class="plus">+</span>
              Suggest structure
            </button>
          </div>
        </div>

        <div class="input-card" style="margin-top:6px;">
          <div class="input-label-row">
            <div class="input-label">Suggested structure</div>
          </div>
          <div class="profile-small" id="script-assistant-output">
            We’ll outline a simple timeline here. You can then paste it back into the main prompt or script box.
          </div>
        </div>
      </div>

      <!-- MEDIA FEED -->
      <div id="view-media" class="lab-secondary">
        <div class="lab-main-header">
          <div>
            <div class="lab-main-title">Media · Community Video Feed</div>
            <div class="lab-main-sub">
              Imagine a vertical feed of Sulandra AI videos – challenges, covers, loops – with likes, comments and “use style” buttons.
            </div>
          </div>
        </div>

        <div class="media-grid">
          <div class="media-card">
            <div class="media-thumb"></div>
            <div>Afrobeats challenge – Lagos rooftop</div>
            <div class="media-meta-row">
              <span>3.4k likes · 210 comments</span>
              <span>Use style →</span>
            </div>
          </div>
          <div class="media-card">
            <div class="media-thumb"></div>
            <div>Gospel live hall cut</div>
            <div class="media-meta-row">
              <span>1.9k likes</span>
              <span>Use style →</span>
            </div>
          </div>
          <div class="media-card">
            <div class="media-thumb"></div>
            <div>Cinematic intro for web series</div>
            <div class="media-meta-row">
              <span>2.2k likes</span>
              <span>Remix →</span>
            </div>
          </div>
        </div>

        <div class="profile-small">
          Later, “Use style” will clone the visual rhythm, lighting and color from a community video and apply it to your own prompts and assets.
        </div>
      </div>
    </section>
  </section>
</main>

<footer>
  Sulandra AI Studio – Video Lab · Text, image, script and clip-based video generation with style references and Studio integration.
</footer>

<!-- PROFILE OVERLAY -->
<div class="profile-overlay" id="profile-overlay">
  <div class="profile-panel">
    <div class="profile-header">
      <div class="profile-header-main">
        <div class="profile-avatar-lg" id="profile-avatar-lg">G</div>
        <div>
          <div class="profile-header-text-main" id="profile-name">Guest</div>
          <div class="profile-header-text-sub" id="profile-plan-label">
            Not signed in
          </div>
        </div>
      </div>
      <button class="close-btn" type="button" onclick="toggleProfile()">Close</button>
    </div>

    <div class="profile-body">
      <div class="profile-menu">
        <button id="menu-overview" class="active" onclick="setProfileSection('overview')">View profile</button>
        <button onclick="setProfileSection('edit')">Edit profile</button>
        <button onclick="setProfileSection('invite')">Invite friends</button>
        <button onclick="setProfileSection('subscription')">Subscription</button>
        <button onclick="setProfileSection('account')">Manage account</button>
        <button onclick="setProfileSection('theme')">Theme</button>
      </div>

      <div class="profile-content" id="profile-content">
        <!-- Filled by JS -->
      </div>
    </div>

    <div class="profile-footer">
      <div>Signed in state is simulated. Real auth & billing will connect later.</div>
      <button type="button" id="sign-toggle" onclick="toggleSignIn()">Sign in</button>
    </div>
  </div>
</div>

<!-- PLAN OVERLAY -->
<div class="plan-overlay" id="plan-overlay">
  <div class="plan-dialog">
    <div class="plan-dialog-header">
      <div>
        <div class="plan-dialog-title" id="plan-dialog-title">Pro plan</div>
        <div class="plan-dialog-sub" id="plan-dialog-sub">
          Full access to WAV export, HD/UHD quality and credit packs.
        </div>
      </div>
      <div class="toggle-pill">
        <button type="button" id="toggle-monthly" class="active" onclick="setPlanBilling('monthly')">
          Monthly
        </button>
        <button type="button" id="toggle-yearly" onclick="setPlanBilling('yearly')">
          Yearly
        </button>
      </div>
    </div>

    <div class="plan-dialog-body">
      <div class="price-row">
        <div class="price-main" id="plan-price-main">$20</div>
        <div class="price-note" id="plan-price-note">per month · 2500 credits</div>
      </div>
      <div class="price-row" id="price-row-yearly" style="display:none;">
        <div class="price-strike" id="plan-price-strike">$240 / year</div>
        <div class="price-save" id="plan-price-save">You save $12 (5%)</div>
      </div>
      <div class="profile-small" id="plan-dialog-extra">
        Choose monthly for flexibility, or yearly for the best price. A 7-day free trial is available for new users (no exports until trial converts).
      </div>
    </div>

    <div class="plan-dialog-footer">
      <button class="btn-primary" type="button" onclick="startSignup()">
        <span class="plus">+</span>
        Continue – signup & payment
      </button>
      <button class="btn-ghost" type="button" onclick="closePlanDetails()">
        Cancel
      </button>
    </div>
  </div>
</div>

<script>
  // --- CONNECTION SETTINGS ---
  // This is your actual RunPod URL
  const API_URL = "https://j61fbk8b92147l-8000.proxy.runpod.net"; 
  let selectedImageFile = null;

  function fileSelected(input) {
    if (input.files && input.files[0]) {
      selectedImageFile = input.files[0];
      // Visual feedback
      alert("Image selected: " + selectedImageFile.name);
      document.querySelector('.upload-box strong').textContent = selectedImageFile.name;
      document.querySelector('.upload-box').style.borderColor = "#a855f7";
    }
  }
  // USER / PLAN STATE
  let isSignedIn = false;
  let user = {
    name: "Guest",
    initial: "G",
    plan: "basic",
    credits: 0,
    maxCredits: 0
  };

  const planConfig = {
    basic: {
      name: "Basic",
      monthly: 0,
      yearly: 0,
      discount: 0,
      credits: "50 credits / month",
      description:
        "Free plan. UHD-quality previews with watermark, MP3-only audio and 50 monthly credits.",
      yearlyNote: "Basic is always free. Yearly billing applies only to paid plans."
    },
    pro: {
      name: "Pro",
      monthly: 20,
      yearly: 228,
      discount: 5,
      credits: "2500 credits / month",
      description:
        "For serious creators who need clean exports, WAV audio and higher resolutions.",
      yearlyNote:
        "Normal yearly cost would be $240; you pay $228 (save $12, 5%)."
    },
    creator: {
      name: "Creator",
      monthly: 30,
      yearly: 331.2,
      discount: 8,
      credits: "5000 credits / month",
      description:
        "Power users who want 4K, Studio workflows and Ultimate add-ons, with enough credits for real monthly projects.",
      yearlyNote:
        "Normal yearly cost would be $360; you pay $331.20 (save $28.80, 8%)."
    },
    creatorUltimate: {
      name: "Creator Ultimate",
      monthly: 45,
      yearly: 486,
      discount: 10,
      credits: "10000 credits / month",
      description:
        "Everything unlocked: Short Films + Studio heavy use + Stems & MIDI.",
      yearlyNote:
        "Normal yearly cost would be $540; you pay $486 (save $54, 10%)."
    }
  };

  let currentPlanKey = "pro";
  let currentBilling = "monthly";
  let currentView = "create";
  let currentCreateMode = "text";

  function updatePlanInUI() {
    const labPlan = document.getElementById("lab-plan-pill");
    const mainPlanPill = document.getElementById("lab-main-plan-pill");
    const planName = planConfig[user.plan].name;
    labPlan.textContent = `Plan: ${planName} · ${user.credits} / ${user.maxCredits} credits`;
    mainPlanPill.textContent = `Plan: ${planName} · ${user.credits} / ${user.maxCredits} credits`;
  }

  function setView(view) {
    currentView = view;

    document.querySelectorAll(".sidebar-btn").forEach(btn => btn.classList.remove("active"));

    if (view === "create") {
      if (currentCreateMode === "text") document.getElementById("btn-create-text").classList.add("active");
      if (currentCreateMode === "images") document.getElementById("btn-create-images").classList.add("active");
      if (currentCreateMode === "script") document.getElementById("btn-create-script").classList.add("active");
      if (currentCreateMode === "video") document.getElementById("btn-create-video").classList.add("active");
    } else if (view === "videos") {
      document.querySelectorAll(".sidebar-btn")[4].classList.add("active");
    } else if (view === "script-assistant") {
      document.querySelectorAll(".sidebar-btn")[5].classList.add("active");
    } else if (view === "media") {
      document.querySelectorAll(".sidebar-btn")[6].classList.add("active");
    }

    document.getElementById("view-create").style.display = "none";
    document.getElementById("view-videos").classList.remove("active");
    document.getElementById("view-script-assistant").classList.remove("active");
    document.getElementById("view-media").classList.remove("active");

    const title = document.getElementById("lab-main-title");
    const sub = document.getElementById("lab-main-sub");

    if (view === "create") {
      document.getElementById("view-create").style.display = "grid";
      updateCreateModeText();
    } else if (view === "videos") {
      document.getElementById("view-videos").classList.add("active");
      title.textContent = "My videos";
      sub.textContent =
        "All your generated videos from this device (demo). Later this syncs with your Sulandra account and Studio.";
    } else if (view === "script-assistant") {
      document.getElementById("view-script-assistant").classList.add("active");
      title.textContent = "AI script / storyboard assistant";
      sub.textContent =
        "Describe your idea and we’ll suggest a 7–60 second structure you can paste back into the main prompt.";
    } else if (view === "media") {
      document.getElementById("view-media").classList.add("active");
      title.textContent = "Media · Community Video Feed";
      sub.textContent =
        "Preview how a Sulandra AI video feed could look once your platform is live.";
    }
  }

  function setCreateMode(mode) {
    currentCreateMode = mode;

    document.getElementById("btn-create-text").classList.remove("active");
    document.getElementById("btn-create-images").classList.remove("active");
    document.getElementById("btn-create-script").classList.remove("active");
    document.getElementById("btn-create-video").classList.remove("active");

    if (mode === "text") document.getElementById("btn-create-text").classList.add("active");
    if (mode === "images") document.getElementById("btn-create-images").classList.add("active");
    if (mode === "script") document.getElementById("btn-create-script").classList.add("active");
    if (mode === "video") document.getElementById("btn-create-video").classList.add("active");

    updateCreateModeText();
    updateCreditEstimate();
  }

  function updateCreateModeText() {
    const title = document.getElementById("lab-main-title");
    const sub = document.getElementById("lab-main-sub");
    const inputsLabel = document.getElementById("inputs-label");
    const inputsHelp = document.getElementById("inputs-help");

    if (currentCreateMode === "text") {
      title.textContent = "Create · Text → Video";
      sub.textContent =
        "Describe the scene, choose a style or paste a short YouTube reference, and Sulandra will generate a fresh video.";
      inputsLabel.textContent = "Prompt";
      inputsHelp.textContent =
        "Explain what should happen: subject, location, movement, camera, mood and any text on screen.";
    } else if (currentCreateMode === "images") {
      title.textContent = "Create · Images → Video";
      sub.textContent =
        "Upload images, choose a style and pacing, and we’ll animate pans, zooms and transitions on beat.";
      inputsLabel.textContent = "Images + prompt (optional)";
      inputsHelp.textContent =
        "Use your photos or generated images and describe how we should move between them.";
    } else if (currentCreateMode === "script") {
      title.textContent = "Create · Script → Video";
      sub.textContent =
        "Upload or paste a short script and turn it into a 7–60 second visual teaser or loop.";
      inputsLabel.textContent = "Script text / beats";
      inputsHelp.textContent =
        "Use scene numbers or bullet points. We’ll convert them into shots and micro-scenes.";
    } else if (currentCreateMode === "video") {
      title.textContent = "Create · Video → Video";
      sub.textContent =
        "Upload a base video and let Sulandra restyle, re-cut or enhance it based on your prompt and style reference.";
      inputsLabel.textContent = "Source video + instructions";
      inputsHelp.textContent =
        "Tell Sulandra what to change: color, background, camera feeling, intensity, text layering, etc.";
    }

    // Update preview meta a bit
    const meta = document.getElementById("video-meta");
    const durationLabel = document.getElementById("preview-duration-label");
    const dur = document.getElementById("duration").value;
    durationLabel.textContent = `0:${dur.padStart(2, "0")}`;

    let modeLabel = "Text → Video";
    if (currentCreateMode === "images") modeLabel = "Images → Video";
    if (currentCreateMode === "script") modeLabel = "Script → Video";
    if (currentCreateMode === "video") modeLabel = "Video → Video";

    meta.textContent = `Sample preview · ${modeLabel} · Afrobeats dance · Vertical 9:16 · 0:${dur.padStart(2, "0")}`;
  }

  function updateStyleMode() {
    const value = document.querySelector('input[name="style-mode"]:checked').value;
    document.getElementById("style-upload-row").style.display = value === "upload" ? "block" : "none";
    document.getElementById("style-youtube-row").style.display = value === "youtube" ? "block" : "none";
    updateCreditEstimate();
  }

  function handleStyleUpload() {
    alert(
      "Style reference upload placeholder.\n\nIn production this will open a file picker and enforce a maximum duration of 4 minutes using your backend."
    );
  }

function handleUpload(type) {
    if (type === 'images') {
      // Trigger the invisible file picker
      document.getElementById('real-file-input').click();
    } else {
      alert("For this test, please use 'Upload Images' only. The AI server is running Image-to-Video mode.");
    }
  }
  function importMusic() {
    alert(
      "Music Lab import placeholder.\n\nIn the future this will open your music generations and let you attach a specific track as the audio source."
    );
  }

  function importFrom(lab) {
    let name = lab === "image" ? "Image Lab" : lab === "film" ? "Short Films" : "Music Lab";
    alert(
      "Import from " +
        name +
        " placeholder.\n\nThis will let users pick existing assets without re-uploading, and attach them to this video project."
    );
  }

  function updateCreditEstimate() {
    let base = 10;
    if (currentCreateMode === "images") base = 15; // similar to image-to-image cost you defined
    if (currentCreateMode === "script") base = 10;
    if (currentCreateMode === "video") base = 10;

    const styleMode = document.querySelector('input[name="style-mode"]:checked').value;
    let extraStyle = 0;
    if (styleMode === "upload" || styleMode === "youtube") {
      extraStyle = 10; // YouTube or uploaded reference costs +10 credits
    }

    let extraLip = document.getElementById("toggle-lipsync").checked ? 10 : 0;

    const total = base + extraStyle + extraLip;

    document.getElementById("credit-note").textContent =
      `Base: ${base} credits (depends on mode). Style reference +${extraStyle}, lip sync +${extraLip}. Estimated: ${total} credits.`;
  }

  function validateYoutubeUrl(url) {
    if (!url) return true; // nothing to check
    const isYoutube =
      url.includes("youtube.com") || url.includes("youtu.be");
    if (!isYoutube) {
      alert("Please paste a valid YouTube link.");
      return false;
    }
    // In the real app, you’ll call YouTube API and reject if duration > 4 minutes.
    alert(
      "YouTube style reference detected.\n\nIn production, Sulandra will check the video duration via the YouTube API and reject links longer than 4 minutes."
    );
    return true;
  }

async function runVideoGeneration() {
    // 1. Check if an image is selected
    if (!selectedImageFile) {
      alert("Please upload an image first!");
      return;
    }

    // 2. Update UI to show loading
    const btn = document.querySelector('.btn-primary');
    const originalText = btn.innerHTML;
    btn.innerHTML = "Generating... (Wait ~60s)";
    btn.style.opacity = "0.7";
    btn.disabled = true;

    try {
      // 3. Prepare the data to send
      const formData = new FormData();
      formData.append("file", selectedImageFile);

      // 4. Send to RunPod (The Real API Call)
      const response = await fetch(`${API_URL}/generate-video`, {
        method: 'POST',
        body: formData
      });

      if (!response.ok) throw new Error("Server Error: " + response.statusText);

      // 5. Get the video result
      const videoBlob = await response.blob();
      const videoUrl = URL.createObjectURL(videoBlob);

      // 6. Display the video in the preview box
      const videoFrame = document.querySelector('.video-frame');
      videoFrame.innerHTML = `
        <video controls autoplay loop style="width:100%; height:100%; object-fit:cover; border-radius:8px;">
          <source src="${videoUrl}" type="video/mp4">
        </video>
      `;
      
      document.getElementById('video-meta').textContent = "Generated Successfully · RunPod AI";

    } catch (error) {
      console.error(error);
      alert("Generation failed! Make sure your RunPod server is running. Error: " + error.message);
    } finally {
      // 7. Reset the button
      btn.innerHTML = originalText;
      btn.style.opacity = "1";
      btn.disabled = false;
    }
  }

  function remixVideo() {
    alert(
      "Remix placeholder.\n\nIn production you’ll be able to keep the same style and audio but change the prompt or camera feeling and regenerate variations."
    );
  }

  function downloadVideo() {
    const plan = user.plan;
    let message =
      "Export placeholder.\n\nIn production users will choose export format (MP4), resolution and audio type based on their plan:";
    message +=
      "\n\n• Basic: MP4 with watermark, MP3 audio only.\n" +
      "• Pro: MP4 clean, HD/UHD, WAV audio.\n" +
      "• Creator: up to 4K, advanced controls.\n" +
      "• Creator Ultimate: 4K heavy usage, Studio integration for full projects.";
    alert(message);
  }

  /* STORYBOARD ASSISTANT */

  function suggestStoryboard() {
    const input = document.getElementById("script-assistant-input").value.trim();
    const out = document.getElementById("script-assistant-output");
    if (!input) {
      out.textContent = "Describe your idea first, then we’ll outline a simple 7–60 second structure.";
      return;
    }
    out.innerHTML = `
      <div class="profile-small"><strong>Suggested structure:</strong></div>
      <div class="profile-small">
        <strong>0:00–0:03</strong> – Establishing shot. Quick glimpse of the setting, main subject comes into frame.<br/>
        <strong>0:03–0:07</strong> – First strong move or key action, synced to the beat or main word.<br/>
        <strong>0:07–0:12</strong> – Variation shot: different angle, closer framing, or crowd / background reaction.<br/>
        <strong>0:12–0:15</strong> – Signature moment: slow motion on the best move or emotional expression.<br/>
        <strong>0:15–0:20+</strong> – Optional extra beats, looping outro or text on screen with your CTA.
      </div>
      <div class="profile-small">
        You can paste or adapt this back into the main Video Lab prompt or script field before generating.
      </div>
    `;
  }

  /* PROFILE PANEL */

  function toggleProfile() {
    const overlay = document.getElementById("profile-overlay");
    overlay.classList.toggle("show");
    if (overlay.classList.contains("show")) {
      renderProfileSection("overview");
    }
  }

  function setProfileSection(section) {
    document
      .querySelectorAll(".profile-menu button")
      .forEach(btn => btn.classList.remove("active"));

    if (section === "overview") {
      document.getElementById("menu-overview").classList.add("active");
    } else {
      document
        .querySelector(`.profile-menu button[onclick*="${section}"]`)
        .classList.add("active");
    }

    renderProfileSection(section);
  }

  function renderProfileSection(section) {
    const content = document.getElementById("profile-content");

    if (section === "overview") {
      content.innerHTML = `
        <div class="profile-section-title">Profile overview</div>
        <div class="profile-section-sub">
          Signed in state is simulated. Later this links to your real Sulandra account.
        </div>
        <div class="profile-line"><strong>Name:</strong> ${user.name}</div>
        <div class="profile-line"><strong>Current plan:</strong> ${planConfig[user.plan].name}</div>
        <div class="profile-line"><strong>Credits:</strong> ${user.credits} / ${user.maxCredits}</div>
        <div class="profile-small">
          For video generation: Basic has watermark, Pro adds clean WAV/HD, Creator+ unlocks 4K and heavier Studio workflows.
        </div>
      `;
    } else if (section === "edit") {
      content.innerHTML = `
        <div class="profile-section-title">Edit profile</div>
        <div class="profile-section-sub">Change your display name (local demo only).</div>
        <label for="edit-name">Display name</label>
        <input id="edit-name" type="text" value="${user.name}" />
        <button class="btn-primary" style="margin-top:8px;" type="button" onclick="saveProfileName()">
          <span class="plus">+</span> Save name
        </button>
        <div class="profile-small">In production this would update your user record in your backend.</div>
      `;
    } else if (section === "invite") {
      content.innerHTML = `
        <div class="profile-section-title">Invite friends</div>
        <div class="profile-section-sub">
          Later this will generate invite links with credit rewards for both sides.
        </div>
        <div class="profile-small">Sample invite link (demo):</div>
        <div class="chip">https://sulandra.ai/invite/YOURCODE</div>
      `;
    } else if (section === "subscription") {
      const planName = planConfig[user.plan].name;
      content.innerHTML = `
        <div class="profile-section-title">Subscription & credits</div>
        <div class="profile-section-sub">
          Choose or change your plan. This matches the UX you’ll connect to Stripe / PayPal / Apple Pay.
        </div>
        <div class="profile-line"><strong>Current plan:</strong> ${planName}</div>
        <div class="profile-line"><strong>Credits:</strong> ${user.credits} / ${user.maxCredits}</div>
        <div class="profile-small">Click a chip to simulate switching plans:</div>
        <div style="margin-bottom:6px;">
          <span class="chip" onclick="simulatePlan('basic')">Basic</span>
          <span class="chip" onclick="simulatePlan('pro')">Pro</span>
          <span class="chip" onclick="simulatePlan('creator')">Creator</span>
          <span class="chip" onclick="simulatePlan('creatorUltimate')">Creator Ultimate</span>
        </div>
        <div class="profile-small">
          In production, upgrading keeps your remaining credits and only charges the difference. Basic users cannot buy credit packs.
        </div>
      `;
    } else if (section === "account") {
      content.innerHTML = `
        <div class="profile-section-title">Manage account</div>
        <div class="profile-section-sub">
          This will host billing history, invoices and payment methods (PayPal, cards, Apple Pay).
        </div>
        <ul class="plan-list">
          <li>• View invoices and payment history</li>
          <li>• Update payment methods</li>
          <li>• Turn auto-renew on / off</li>
          <li>• Download receipts for taxes</li>
        </ul>
      `;
    } else if (section === "theme") {
      content.innerHTML = `
        <div class="profile-section-title">Theme</div>
        <div class="profile-section-sub">
          Theme switching is not wired yet, but here is where light / dark / high-contrast options will live.
        </div>
        <div class="chip">Dark (current)</div>
        <div class="chip">Light (placeholder)</div>
        <div class="chip">High contrast (placeholder)</div>
      `;
    }

    updateProfileHeader();
  }

  function updateProfileHeader() {
    document.getElementById("profile-avatar").textContent = user.initial;
    document.getElementById("profile-avatar-lg").textContent = user.initial;
    document.getElementById("profile-name").textContent = user.name;
    document.getElementById("profile-label").textContent = isSignedIn ? "Profile" : "Sign in";
    document.getElementById("profile-credits").textContent =
      `${user.credits} / ${user.maxCredits} credits`;
    const planLabel = isSignedIn
      ? `Plan: ${planConfig[user.plan].name}`
      : "Not signed in";
    document.getElementById("profile-plan-label").textContent = planLabel;
    document.getElementById("sign-toggle").textContent =
      isSignedIn ? "Sign out" : "Sign in";
    updatePlanInUI();
  }

  function saveProfileName() {
    const input = document.getElementById("edit-name");
    const name = input.value.trim() || "Guest";
    user.name = name;
    user.initial = name.charAt(0).toUpperCase();
    renderProfileSection("overview");
    alert("Name updated in local demo. In production this will save to your backend.");
  }

  function toggleSignIn() {
    isSignedIn = !isSignedIn;
    if (isSignedIn && user.maxCredits === 0) {
      simulatePlan("pro", true);
    } else {
      updateProfileHeader();
      renderProfileSection("overview");
    }
  }

  function simulatePlan(key, silent) {
    user.plan = key;
    if (key === "basic") {
      user.maxCredits = 50;
    } else if (key === "pro") {
      user.maxCredits = 2500;
    } else if (key === "creator") {
      user.maxCredits = 5000;
    } else if (key === "creatorUltimate") {
      user.maxCredits = 10000;
    }
    user.credits = user.maxCredits;
    updateProfileHeader();
    if (!silent) {
      alert("Plan switched in local demo to: " + planConfig[key].name);
    }
  }

  /* PLAN MODAL */

  function openPlanDetails(key) {
    currentPlanKey = key;
    currentBilling = "monthly";
    updatePlanDialog();
    document.getElementById("plan-overlay").classList.add("show");
  }

  function closePlanDetails() {
    document.getElementById("plan-overlay").classList.remove("show");
  }

  function setPlanBilling(mode) {
    currentBilling = mode;
    updatePlanDialog();
  }

  function updatePlanDialog() {
    const config = planConfig[currentPlanKey];

    document.getElementById("plan-dialog-title").textContent =
      config.name + " plan";
    document.getElementById("plan-dialog-sub").textContent =
      config.description;

    const monthlyBtn = document.getElementById("toggle-monthly");
    const yearlyBtn = document.getElementById("toggle-yearly");
    monthlyBtn.classList.toggle("active", currentBilling === "monthly");
    yearlyBtn.classList.toggle("active", currentBilling === "yearly");

    const priceMain = document.getElementById("plan-price-main");
    const priceNote = document.getElementById("plan-price-note");
    const rowYearly = document.getElementById("price-row-yearly");
    const strike = document.getElementById("plan-price-strike");
    const save = document.getElementById("plan-price-save");
    const extra = document.getElementById("plan-dialog-extra");

    if (currentBilling === "monthly") {
      priceMain.textContent =
        config.monthly === 0 ? "$0" : "$" + config.monthly;
      priceNote.textContent = "per month · " + config.credits;
      rowYearly.style.display = "none";
      if (config.monthly === 0) {
        extra.textContent =
          "Basic stays free with 50 credits and watermark. Upgrade anytime to unlock clean exports.";
      } else {
        extra.textContent =
          "Pay monthly for flexibility, or switch to yearly later to save more.";
      }
    } else {
      if (config.monthly === 0) {
        priceMain.textContent = "$0";
        priceNote.textContent =
          "Always free · 50 credits / month · watermark";
        rowYearly.style.display = "none";
        extra.textContent =
          "Basic is always free. Yearly discounts apply only to paid plans.";
      } else {
        priceMain.textContent = "$" + config.yearly.toFixed(2);
        priceNote.textContent = "per year · " + config.credits;
        const normalYearPrice = config.monthly * 12;
        strike.textContent = "$" + normalYearPrice.toFixed(2) + " / year";
        const savings = normalYearPrice - config.yearly;
        save.textContent =
          "You save $" +
          savings.toFixed(2) +
          " (" +
          config.discount +
          "%)";
        rowYearly.style.display = "flex";
        extra.textContent =
          config.yearlyNote +
          " Billing renews yearly; you can downgrade or upgrade at any time.";
      }
    }
  }

  function startSignup() {
    alert(
      "Signup flow placeholder.\n\nIn the real app, this will open your auth + payment flow for the selected plan and billing period."
    );
    simulatePlan(currentPlanKey, true);
    isSignedIn = true;
    updateProfileHeader();
    toggleProfile();
    closePlanDetails();
  }

  // INITIALIZE
  simulatePlan("basic", true);
  updateProfileHeader();
  setView("create");
  setCreateMode("text");
  updateStyleMode();
  updateCreditEstimate();
</script>
</body>
</html>
